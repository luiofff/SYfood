{"ast":null,"code":"import React from 'react';\nimport { List } from '../../../List';\nimport { SelectQa, selectListBlock } from '../../constants';\nimport { getOptionsHeight, getPopupItemHeight } from '../../utils';\nimport { GroupLabel } from './GroupLabel';\nimport { OptionWrap } from './OptionWrap';\nimport { SelectLoadingIndicator } from './SelectLoadingIndicator';\nimport './SelectList.css';\nconst loadingOption = {\n  value: '__SELECT_LIST_ITEM_LOADING__',\n  disabled: true\n};\nexport const SelectList = React.forwardRef((props, ref) => {\n  const {\n    onOptionClick,\n    renderOption,\n    renderOptionGroup,\n    getOptionHeight,\n    getOptionGroupHeight,\n    size,\n    flattenOptions,\n    value,\n    multiple,\n    virtualized,\n    mobile,\n    loading,\n    onLoadMore,\n    selectId,\n    onChangeActive\n  } = props;\n  const items = React.useMemo(() => loading ? [...flattenOptions, loadingOption] : flattenOptions, [flattenOptions, loading]);\n  const selectedIndexes = React.useMemo(() => flattenOptions.reduce((acc, option, index) => {\n    if ('value' in option && value.includes(option.value)) {\n      acc.push(index);\n    }\n    return acc;\n  }, []), [flattenOptions, value]);\n  const optionsHeight = getOptionsHeight({\n    options: items,\n    getOptionHeight,\n    getOptionGroupHeight,\n    size,\n    mobile\n  });\n  const getItemHeight = React.useCallback((option, index) => {\n    return getPopupItemHeight({\n      getOptionHeight,\n      getOptionGroupHeight,\n      size,\n      option,\n      index,\n      mobile\n    });\n  }, [getOptionHeight, getOptionGroupHeight, mobile, size]);\n  const renderItem = React.useCallback((option, _isItemActive, itemIndex) => {\n    if ('label' in option) {\n      const wrappedRenderOptionGroup = renderOptionGroup ? optionLocal => {\n        return renderOptionGroup(optionLocal, {\n          itemHeight: getItemHeight(optionLocal, itemIndex)\n        });\n      } : undefined;\n      return React.createElement(GroupLabel, {\n        option: option,\n        renderOptionGroup: wrappedRenderOptionGroup\n      });\n    }\n    if (option.value === loadingOption.value) {\n      return React.createElement(SelectLoadingIndicator, {\n        onIntersect: itemIndex === 0 ? undefined : onLoadMore\n      });\n    }\n    const wrappedRenderOption = renderOption ? optionLocal => {\n      return renderOption(optionLocal, {\n        itemHeight: getItemHeight(optionLocal, itemIndex)\n      });\n    } : undefined;\n    return React.createElement(OptionWrap, {\n      option: option,\n      value: value,\n      multiple: multiple,\n      renderOption: wrappedRenderOption\n    });\n  }, [renderOption, renderOptionGroup, value, multiple, getItemHeight, onLoadMore]);\n  return React.createElement(List, {\n    ref: ref,\n    className: selectListBlock({\n      size,\n      virtualized,\n      mobile\n    }),\n    qa: SelectQa.LIST,\n    itemClassName: selectListBlock('item'),\n    itemHeight: getItemHeight,\n    itemsHeight: virtualized ? optionsHeight : undefined,\n    items: items,\n    filterable: false,\n    virtualized: virtualized,\n    renderItem: renderItem,\n    onItemClick: onOptionClick,\n    selectedItemIndex: selectedIndexes,\n    id: \"\".concat(selectId, \"-list\"),\n    role: \"listbox\",\n    onChangeActive: onChangeActive\n  });\n});\nSelectList.displayName = 'SelectList';","map":{"version":3,"names":["React","List","SelectQa","selectListBlock","getOptionsHeight","getPopupItemHeight","GroupLabel","OptionWrap","SelectLoadingIndicator","loadingOption","value","disabled","SelectList","forwardRef","props","ref","onOptionClick","renderOption","renderOptionGroup","getOptionHeight","getOptionGroupHeight","size","flattenOptions","multiple","virtualized","mobile","loading","onLoadMore","selectId","onChangeActive","items","useMemo","selectedIndexes","reduce","acc","option","index","includes","push","optionsHeight","options","getItemHeight","useCallback","renderItem","_isItemActive","itemIndex","wrappedRenderOptionGroup","optionLocal","itemHeight","undefined","createElement","onIntersect","wrappedRenderOption","className","qa","LIST","itemClassName","itemsHeight","filterable","onItemClick","selectedItemIndex","id","concat","role","displayName"],"sources":["/Users/ilaulanov/Documents/SynopsisYard/SYfood/client/node_modules/@gravity-ui/uikit/build/esm/components/Select/components/SelectList/SelectList.js"],"sourcesContent":["import React from 'react';\nimport { List } from '../../../List';\nimport { SelectQa, selectListBlock } from '../../constants';\nimport { getOptionsHeight, getPopupItemHeight } from '../../utils';\nimport { GroupLabel } from './GroupLabel';\nimport { OptionWrap } from './OptionWrap';\nimport { SelectLoadingIndicator } from './SelectLoadingIndicator';\nimport './SelectList.css';\nconst loadingOption = { value: '__SELECT_LIST_ITEM_LOADING__', disabled: true };\nexport const SelectList = React.forwardRef((props, ref) => {\n    const { onOptionClick, renderOption, renderOptionGroup, getOptionHeight, getOptionGroupHeight, size, flattenOptions, value, multiple, virtualized, mobile, loading, onLoadMore, selectId, onChangeActive, } = props;\n    const items = React.useMemo(() => (loading ? [...flattenOptions, loadingOption] : flattenOptions), [flattenOptions, loading]);\n    const selectedIndexes = React.useMemo(() => flattenOptions.reduce((acc, option, index) => {\n        if ('value' in option && value.includes(option.value)) {\n            acc.push(index);\n        }\n        return acc;\n    }, []), [flattenOptions, value]);\n    const optionsHeight = getOptionsHeight({\n        options: items,\n        getOptionHeight,\n        getOptionGroupHeight,\n        size,\n        mobile,\n    });\n    const getItemHeight = React.useCallback((option, index) => {\n        return getPopupItemHeight({\n            getOptionHeight,\n            getOptionGroupHeight,\n            size,\n            option,\n            index,\n            mobile,\n        });\n    }, [getOptionHeight, getOptionGroupHeight, mobile, size]);\n    const renderItem = React.useCallback((option, _isItemActive, itemIndex) => {\n        if ('label' in option) {\n            const wrappedRenderOptionGroup = renderOptionGroup\n                ? (optionLocal) => {\n                    return renderOptionGroup(optionLocal, {\n                        itemHeight: getItemHeight(optionLocal, itemIndex),\n                    });\n                }\n                : undefined;\n            return React.createElement(GroupLabel, { option: option, renderOptionGroup: wrappedRenderOptionGroup });\n        }\n        if (option.value === loadingOption.value) {\n            return (React.createElement(SelectLoadingIndicator, { onIntersect: itemIndex === 0 ? undefined : onLoadMore }));\n        }\n        const wrappedRenderOption = renderOption\n            ? (optionLocal) => {\n                return renderOption(optionLocal, {\n                    itemHeight: getItemHeight(optionLocal, itemIndex),\n                });\n            }\n            : undefined;\n        return (React.createElement(OptionWrap, { option: option, value: value, multiple: multiple, renderOption: wrappedRenderOption }));\n    }, [renderOption, renderOptionGroup, value, multiple, getItemHeight, onLoadMore]);\n    return (React.createElement(List, { ref: ref, className: selectListBlock({ size, virtualized, mobile }), qa: SelectQa.LIST, itemClassName: selectListBlock('item'), itemHeight: getItemHeight, itemsHeight: virtualized ? optionsHeight : undefined, items: items, filterable: false, virtualized: virtualized, renderItem: renderItem, onItemClick: onOptionClick, selectedItemIndex: selectedIndexes, id: `${selectId}-list`, role: \"listbox\", onChangeActive: onChangeActive }));\n});\nSelectList.displayName = 'SelectList';\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,IAAI,QAAQ,eAAe;AACpC,SAASC,QAAQ,EAAEC,eAAe,QAAQ,iBAAiB;AAC3D,SAASC,gBAAgB,EAAEC,kBAAkB,QAAQ,aAAa;AAClE,SAASC,UAAU,QAAQ,cAAc;AACzC,SAASC,UAAU,QAAQ,cAAc;AACzC,SAASC,sBAAsB,QAAQ,0BAA0B;AACjE,OAAO,kBAAkB;AACzB,MAAMC,aAAa,GAAG;EAAEC,KAAK,EAAE,8BAA8B;EAAEC,QAAQ,EAAE;AAAK,CAAC;AAC/E,OAAO,MAAMC,UAAU,GAAGZ,KAAK,CAACa,UAAU,CAAC,CAACC,KAAK,EAAEC,GAAG,KAAK;EACvD,MAAM;IAAEC,aAAa;IAAEC,YAAY;IAAEC,iBAAiB;IAAEC,eAAe;IAAEC,oBAAoB;IAAEC,IAAI;IAAEC,cAAc;IAAEZ,KAAK;IAAEa,QAAQ;IAAEC,WAAW;IAAEC,MAAM;IAAEC,OAAO;IAAEC,UAAU;IAAEC,QAAQ;IAAEC;EAAgB,CAAC,GAAGf,KAAK;EACnN,MAAMgB,KAAK,GAAG9B,KAAK,CAAC+B,OAAO,CAAC,MAAOL,OAAO,GAAG,CAAC,GAAGJ,cAAc,EAAEb,aAAa,CAAC,GAAGa,cAAe,EAAE,CAACA,cAAc,EAAEI,OAAO,CAAC,CAAC;EAC7H,MAAMM,eAAe,GAAGhC,KAAK,CAAC+B,OAAO,CAAC,MAAMT,cAAc,CAACW,MAAM,CAAC,CAACC,GAAG,EAAEC,MAAM,EAAEC,KAAK,KAAK;IACtF,IAAI,OAAO,IAAID,MAAM,IAAIzB,KAAK,CAAC2B,QAAQ,CAACF,MAAM,CAACzB,KAAK,CAAC,EAAE;MACnDwB,GAAG,CAACI,IAAI,CAACF,KAAK,CAAC;IACnB;IACA,OAAOF,GAAG;EACd,CAAC,EAAE,EAAE,CAAC,EAAE,CAACZ,cAAc,EAAEZ,KAAK,CAAC,CAAC;EAChC,MAAM6B,aAAa,GAAGnC,gBAAgB,CAAC;IACnCoC,OAAO,EAAEV,KAAK;IACdX,eAAe;IACfC,oBAAoB;IACpBC,IAAI;IACJI;EACJ,CAAC,CAAC;EACF,MAAMgB,aAAa,GAAGzC,KAAK,CAAC0C,WAAW,CAAC,CAACP,MAAM,EAAEC,KAAK,KAAK;IACvD,OAAO/B,kBAAkB,CAAC;MACtBc,eAAe;MACfC,oBAAoB;MACpBC,IAAI;MACJc,MAAM;MACNC,KAAK;MACLX;IACJ,CAAC,CAAC;EACN,CAAC,EAAE,CAACN,eAAe,EAAEC,oBAAoB,EAAEK,MAAM,EAAEJ,IAAI,CAAC,CAAC;EACzD,MAAMsB,UAAU,GAAG3C,KAAK,CAAC0C,WAAW,CAAC,CAACP,MAAM,EAAES,aAAa,EAAEC,SAAS,KAAK;IACvE,IAAI,OAAO,IAAIV,MAAM,EAAE;MACnB,MAAMW,wBAAwB,GAAG5B,iBAAiB,GAC3C6B,WAAW,IAAK;QACf,OAAO7B,iBAAiB,CAAC6B,WAAW,EAAE;UAClCC,UAAU,EAAEP,aAAa,CAACM,WAAW,EAAEF,SAAS;QACpD,CAAC,CAAC;MACN,CAAC,GACCI,SAAS;MACf,OAAOjD,KAAK,CAACkD,aAAa,CAAC5C,UAAU,EAAE;QAAE6B,MAAM,EAAEA,MAAM;QAAEjB,iBAAiB,EAAE4B;MAAyB,CAAC,CAAC;IAC3G;IACA,IAAIX,MAAM,CAACzB,KAAK,KAAKD,aAAa,CAACC,KAAK,EAAE;MACtC,OAAQV,KAAK,CAACkD,aAAa,CAAC1C,sBAAsB,EAAE;QAAE2C,WAAW,EAAEN,SAAS,KAAK,CAAC,GAAGI,SAAS,GAAGtB;MAAW,CAAC,CAAC;IAClH;IACA,MAAMyB,mBAAmB,GAAGnC,YAAY,GACjC8B,WAAW,IAAK;MACf,OAAO9B,YAAY,CAAC8B,WAAW,EAAE;QAC7BC,UAAU,EAAEP,aAAa,CAACM,WAAW,EAAEF,SAAS;MACpD,CAAC,CAAC;IACN,CAAC,GACCI,SAAS;IACf,OAAQjD,KAAK,CAACkD,aAAa,CAAC3C,UAAU,EAAE;MAAE4B,MAAM,EAAEA,MAAM;MAAEzB,KAAK,EAAEA,KAAK;MAAEa,QAAQ,EAAEA,QAAQ;MAAEN,YAAY,EAAEmC;IAAoB,CAAC,CAAC;EACpI,CAAC,EAAE,CAACnC,YAAY,EAAEC,iBAAiB,EAAER,KAAK,EAAEa,QAAQ,EAAEkB,aAAa,EAAEd,UAAU,CAAC,CAAC;EACjF,OAAQ3B,KAAK,CAACkD,aAAa,CAACjD,IAAI,EAAE;IAAEc,GAAG,EAAEA,GAAG;IAAEsC,SAAS,EAAElD,eAAe,CAAC;MAAEkB,IAAI;MAAEG,WAAW;MAAEC;IAAO,CAAC,CAAC;IAAE6B,EAAE,EAAEpD,QAAQ,CAACqD,IAAI;IAAEC,aAAa,EAAErD,eAAe,CAAC,MAAM,CAAC;IAAE6C,UAAU,EAAEP,aAAa;IAAEgB,WAAW,EAAEjC,WAAW,GAAGe,aAAa,GAAGU,SAAS;IAAEnB,KAAK,EAAEA,KAAK;IAAE4B,UAAU,EAAE,KAAK;IAAElC,WAAW,EAAEA,WAAW;IAAEmB,UAAU,EAAEA,UAAU;IAAEgB,WAAW,EAAE3C,aAAa;IAAE4C,iBAAiB,EAAE5B,eAAe;IAAE6B,EAAE,KAAAC,MAAA,CAAKlC,QAAQ,UAAO;IAAEmC,IAAI,EAAE,SAAS;IAAElC,cAAc,EAAEA;EAAe,CAAC,CAAC;AACtd,CAAC,CAAC;AACFjB,UAAU,CAACoD,WAAW,GAAG,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}