{"ast":null,"code":"import React from 'react';\nimport { KeyCode } from '../constants';\nimport { GROUP_ITEM_MARGIN_TOP, MOBILE_ITEM_HEIGHT, SIZE_TO_ITEM_HEIGHT } from './constants';\nexport const getFlattenOptions = options => {\n  return options.reduce((acc, option) => {\n    if ('label' in option) {\n      acc.push({\n        label: option.label,\n        disabled: true\n      });\n      acc.push(...(option.options || []));\n    } else {\n      acc.push(option);\n    }\n    return acc;\n  }, []);\n};\nexport const getPopupItemHeight = args => {\n  const {\n    getOptionHeight,\n    getOptionGroupHeight,\n    size,\n    option,\n    index,\n    mobile\n  } = args;\n  let itemHeight = mobile ? MOBILE_ITEM_HEIGHT : SIZE_TO_ITEM_HEIGHT[size];\n  if ('label' in option) {\n    const marginTop = index === 0 ? 0 : GROUP_ITEM_MARGIN_TOP;\n    itemHeight = option.label === '' ? 0 : itemHeight;\n    return getOptionGroupHeight ? getOptionGroupHeight(option, index) : itemHeight + marginTop;\n  }\n  return getOptionHeight ? getOptionHeight(option, index) : itemHeight;\n};\nexport const getOptionsHeight = args => {\n  const {\n    getOptionHeight,\n    getOptionGroupHeight,\n    size,\n    options,\n    mobile\n  } = args;\n  return options.reduce((height, option, index) => {\n    return height + getPopupItemHeight({\n      getOptionHeight,\n      getOptionGroupHeight,\n      size,\n      option,\n      index,\n      mobile\n    });\n  }, 0);\n};\nconst getOptionText = option => {\n  if (typeof option.content === 'string') {\n    return option.content;\n  }\n  if (typeof option.children === 'string') {\n    return option.children;\n  }\n  if (option.text) {\n    return option.text;\n  }\n  return option.value;\n};\nexport const getSelectedOptionsContent = (flattenOptions, value, renderSelectedOption) => {\n  if (value.length === 0) {\n    return null;\n  }\n  const flattenSimpleOptions = flattenOptions.filter(opt => !('label' in opt));\n  const selectedOptions = value.reduce((acc, val) => {\n    const selectedOption = flattenSimpleOptions.find(opt => opt.value === val);\n    acc.push(selectedOption || {\n      value: val\n    });\n    return acc;\n  }, []);\n  if (renderSelectedOption) {\n    return selectedOptions.map((option, index) => {\n      return React.createElement(React.Fragment, {\n        key: option.value\n      }, renderSelectedOption(option, index));\n    });\n  } else {\n    return selectedOptions.map(option => {\n      return getOptionText(option);\n    }).join(', ');\n  }\n};\nconst getTypedChildrenArray = children => {\n  return React.Children.toArray(children);\n};\nconst getOptionsFromOptgroupChildren = children => {\n  return React.Children.toArray(children).reduce((acc, {\n    props\n  }) => {\n    if ('value' in props) {\n      acc.push(props);\n    }\n    return acc;\n  }, []);\n};\nexport const getOptionsFromChildren = children => {\n  return getTypedChildrenArray(children).reduce((acc, {\n    props\n  }) => {\n    if ('label' in props) {\n      const options = props.options || getOptionsFromOptgroupChildren(props.children);\n      acc.push({\n        options,\n        label: props.label\n      });\n    }\n    if ('value' in props) {\n      acc.push(Object.assign({}, props));\n    }\n    return acc;\n  }, []);\n};\nexport const getNextQuickSearch = (keyCode, quickSearch) => {\n  // https://www.w3.org/TR/uievents-code/#key-alphanumeric-writing-system\n  const writingSystemKeyPressed = keyCode.length === 1;\n  const backspacePressed = keyCode === KeyCode.BACKSPACE;\n  let nextQuickSearch = '';\n  if (backspacePressed && quickSearch.length) {\n    nextQuickSearch = quickSearch.slice(0, quickSearch.length - 1);\n  } else if (writingSystemKeyPressed) {\n    nextQuickSearch = (quickSearch + keyCode).trim();\n  }\n  return nextQuickSearch;\n};\nconst getEscapedRegExp = string => {\n  return new RegExp(string.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&'), 'i');\n};\nexport const findItemIndexByQuickSearch = (quickSearch, items) => {\n  if (!items) {\n    return -1;\n  }\n  return items.findIndex(item => {\n    if ('label' in item) {\n      return false;\n    }\n    if (item.disabled) {\n      return false;\n    }\n    const optionText = getOptionText(item);\n    return getEscapedRegExp(quickSearch).test(optionText);\n  });\n};\nexport const getListItems = listRef => {\n  var _a;\n  return ((_a = listRef === null || listRef === void 0 ? void 0 : listRef.current) === null || _a === void 0 ? void 0 : _a.getItems()) || [];\n};\nexport const getActiveItem = listRef => {\n  var _a;\n  const items = getListItems(listRef);\n  const activeItemIndex = (_a = listRef === null || listRef === void 0 ? void 0 : listRef.current) === null || _a === void 0 ? void 0 : _a.getActiveItem();\n  return typeof activeItemIndex === 'number' ? items[activeItemIndex] : undefined;\n};\nexport const activateFirstClickableItem = listRef => {\n  var _a;\n  const items = getListItems(listRef);\n  const isGroupTitleFirstItem = items[0] && 'label' in items[0];\n  (_a = listRef === null || listRef === void 0 ? void 0 : listRef.current) === null || _a === void 0 ? void 0 : _a.activateItem(isGroupTitleFirstItem ? 1 : 0, false);\n};\nconst isOptionMatchedByFilter = (option, filter) => {\n  const lowerOptionText = getOptionText(option).toLocaleLowerCase();\n  const lowerFilter = filter.toLocaleLowerCase();\n  return lowerOptionText.indexOf(lowerFilter) !== -1;\n};\nconst isGroupTitle = option => {\n  return Boolean(option && 'label' in option);\n};\nexport const getFilteredFlattenOptions = args => {\n  const {\n    options,\n    filter,\n    filterOption\n  } = args;\n  const filteredOptions = options.filter(option => {\n    if (isGroupTitle(option)) {\n      return true;\n    }\n    return filterOption ? filterOption(option, filter) : isOptionMatchedByFilter(option, filter);\n  });\n  return filteredOptions.reduce((acc, option, index) => {\n    const groupTitle = isGroupTitle(option);\n    const previousGroupTitle = isGroupTitle(acc[acc.length - 1]);\n    const isLastOption = index === filteredOptions.length - 1;\n    if (groupTitle && previousGroupTitle) {\n      acc.pop();\n    }\n    if (!groupTitle || groupTitle && !isLastOption) {\n      acc.push(option);\n    }\n    return acc;\n  }, []);\n};","map":{"version":3,"names":["React","KeyCode","GROUP_ITEM_MARGIN_TOP","MOBILE_ITEM_HEIGHT","SIZE_TO_ITEM_HEIGHT","getFlattenOptions","options","reduce","acc","option","push","label","disabled","getPopupItemHeight","args","getOptionHeight","getOptionGroupHeight","size","index","mobile","itemHeight","marginTop","getOptionsHeight","height","getOptionText","content","children","text","value","getSelectedOptionsContent","flattenOptions","renderSelectedOption","length","flattenSimpleOptions","filter","opt","selectedOptions","val","selectedOption","find","map","createElement","Fragment","key","join","getTypedChildrenArray","Children","toArray","getOptionsFromOptgroupChildren","props","getOptionsFromChildren","Object","assign","getNextQuickSearch","keyCode","quickSearch","writingSystemKeyPressed","backspacePressed","BACKSPACE","nextQuickSearch","slice","trim","getEscapedRegExp","string","RegExp","replace","findItemIndexByQuickSearch","items","findIndex","item","optionText","test","getListItems","listRef","_a","current","getItems","getActiveItem","activeItemIndex","undefined","activateFirstClickableItem","isGroupTitleFirstItem","activateItem","isOptionMatchedByFilter","lowerOptionText","toLocaleLowerCase","lowerFilter","indexOf","isGroupTitle","Boolean","getFilteredFlattenOptions","filterOption","filteredOptions","groupTitle","previousGroupTitle","isLastOption","pop"],"sources":["/Users/ilaulanov/node_modules/@gravity-ui/uikit/build/esm/components/Select/utils.js"],"sourcesContent":["import React from 'react';\nimport { KeyCode } from '../constants';\nimport { GROUP_ITEM_MARGIN_TOP, MOBILE_ITEM_HEIGHT, SIZE_TO_ITEM_HEIGHT } from './constants';\nexport const getFlattenOptions = (options) => {\n    return options.reduce((acc, option) => {\n        if ('label' in option) {\n            acc.push({ label: option.label, disabled: true });\n            acc.push(...(option.options || []));\n        }\n        else {\n            acc.push(option);\n        }\n        return acc;\n    }, []);\n};\nexport const getPopupItemHeight = (args) => {\n    const { getOptionHeight, getOptionGroupHeight, size, option, index, mobile } = args;\n    let itemHeight = mobile ? MOBILE_ITEM_HEIGHT : SIZE_TO_ITEM_HEIGHT[size];\n    if ('label' in option) {\n        const marginTop = index === 0 ? 0 : GROUP_ITEM_MARGIN_TOP;\n        itemHeight = option.label === '' ? 0 : itemHeight;\n        return getOptionGroupHeight ? getOptionGroupHeight(option, index) : itemHeight + marginTop;\n    }\n    return getOptionHeight ? getOptionHeight(option, index) : itemHeight;\n};\nexport const getOptionsHeight = (args) => {\n    const { getOptionHeight, getOptionGroupHeight, size, options, mobile } = args;\n    return options.reduce((height, option, index) => {\n        return (height +\n            getPopupItemHeight({ getOptionHeight, getOptionGroupHeight, size, option, index, mobile }));\n    }, 0);\n};\nconst getOptionText = (option) => {\n    if (typeof option.content === 'string') {\n        return option.content;\n    }\n    if (typeof option.children === 'string') {\n        return option.children;\n    }\n    if (option.text) {\n        return option.text;\n    }\n    return option.value;\n};\nexport const getSelectedOptionsContent = (flattenOptions, value, renderSelectedOption) => {\n    if (value.length === 0) {\n        return null;\n    }\n    const flattenSimpleOptions = flattenOptions.filter((opt) => !('label' in opt));\n    const selectedOptions = value.reduce((acc, val) => {\n        const selectedOption = flattenSimpleOptions.find((opt) => opt.value === val);\n        acc.push(selectedOption || { value: val });\n        return acc;\n    }, []);\n    if (renderSelectedOption) {\n        return selectedOptions.map((option, index) => {\n            return (React.createElement(React.Fragment, { key: option.value }, renderSelectedOption(option, index)));\n        });\n    }\n    else {\n        return selectedOptions\n            .map((option) => {\n            return getOptionText(option);\n        })\n            .join(', ');\n    }\n};\nconst getTypedChildrenArray = (children) => {\n    return React.Children.toArray(children);\n};\nconst getOptionsFromOptgroupChildren = (children) => {\n    return React.Children.toArray(children).reduce((acc, { props }) => {\n        if ('value' in props) {\n            acc.push(props);\n        }\n        return acc;\n    }, []);\n};\nexport const getOptionsFromChildren = (children) => {\n    return getTypedChildrenArray(children).reduce((acc, { props }) => {\n        if ('label' in props) {\n            const options = props.options || getOptionsFromOptgroupChildren(props.children);\n            acc.push({\n                options,\n                label: props.label,\n            });\n        }\n        if ('value' in props) {\n            acc.push(Object.assign({}, props));\n        }\n        return acc;\n    }, []);\n};\nexport const getNextQuickSearch = (keyCode, quickSearch) => {\n    // https://www.w3.org/TR/uievents-code/#key-alphanumeric-writing-system\n    const writingSystemKeyPressed = keyCode.length === 1;\n    const backspacePressed = keyCode === KeyCode.BACKSPACE;\n    let nextQuickSearch = '';\n    if (backspacePressed && quickSearch.length) {\n        nextQuickSearch = quickSearch.slice(0, quickSearch.length - 1);\n    }\n    else if (writingSystemKeyPressed) {\n        nextQuickSearch = (quickSearch + keyCode).trim();\n    }\n    return nextQuickSearch;\n};\nconst getEscapedRegExp = (string) => {\n    return new RegExp(string.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&'), 'i');\n};\nexport const findItemIndexByQuickSearch = (quickSearch, items) => {\n    if (!items) {\n        return -1;\n    }\n    return items.findIndex((item) => {\n        if ('label' in item) {\n            return false;\n        }\n        if (item.disabled) {\n            return false;\n        }\n        const optionText = getOptionText(item);\n        return getEscapedRegExp(quickSearch).test(optionText);\n    });\n};\nexport const getListItems = (listRef) => {\n    var _a;\n    return ((_a = listRef === null || listRef === void 0 ? void 0 : listRef.current) === null || _a === void 0 ? void 0 : _a.getItems()) || [];\n};\nexport const getActiveItem = (listRef) => {\n    var _a;\n    const items = getListItems(listRef);\n    const activeItemIndex = (_a = listRef === null || listRef === void 0 ? void 0 : listRef.current) === null || _a === void 0 ? void 0 : _a.getActiveItem();\n    return typeof activeItemIndex === 'number' ? items[activeItemIndex] : undefined;\n};\nexport const activateFirstClickableItem = (listRef) => {\n    var _a;\n    const items = getListItems(listRef);\n    const isGroupTitleFirstItem = items[0] && 'label' in items[0];\n    (_a = listRef === null || listRef === void 0 ? void 0 : listRef.current) === null || _a === void 0 ? void 0 : _a.activateItem(isGroupTitleFirstItem ? 1 : 0, false);\n};\nconst isOptionMatchedByFilter = (option, filter) => {\n    const lowerOptionText = getOptionText(option).toLocaleLowerCase();\n    const lowerFilter = filter.toLocaleLowerCase();\n    return lowerOptionText.indexOf(lowerFilter) !== -1;\n};\nconst isGroupTitle = (option) => {\n    return Boolean(option && 'label' in option);\n};\nexport const getFilteredFlattenOptions = (args) => {\n    const { options, filter, filterOption } = args;\n    const filteredOptions = options.filter((option) => {\n        if (isGroupTitle(option)) {\n            return true;\n        }\n        return filterOption\n            ? filterOption(option, filter)\n            : isOptionMatchedByFilter(option, filter);\n    });\n    return filteredOptions.reduce((acc, option, index) => {\n        const groupTitle = isGroupTitle(option);\n        const previousGroupTitle = isGroupTitle(acc[acc.length - 1]);\n        const isLastOption = index === filteredOptions.length - 1;\n        if (groupTitle && previousGroupTitle) {\n            acc.pop();\n        }\n        if (!groupTitle || (groupTitle && !isLastOption)) {\n            acc.push(option);\n        }\n        return acc;\n    }, []);\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}