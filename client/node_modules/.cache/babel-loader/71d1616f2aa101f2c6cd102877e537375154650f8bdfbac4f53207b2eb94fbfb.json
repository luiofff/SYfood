{"ast":null,"code":"import React from 'react';\nimport isEqual from 'lodash/isEqual';\nimport isObject from 'lodash/isObject';\nimport { DragDropContext, Draggable, Droppable } from 'react-beautiful-dnd';\nimport AutoSizer from 'react-virtualized-auto-sizer';\nimport { VariableSizeList as ListContainer } from 'react-window';\nimport { SelectLoadingIndicator } from '../Select/components/SelectList/SelectLoadingIndicator';\nimport { TextInput } from '../controls';\nimport { MobileContext } from '../mobile';\nimport { block } from '../utils/cn';\nimport { getUniqId } from '../utils/common';\nimport { ListItem, SimpleContainer, defaultRenderItem } from './components';\nimport { listNavigationIgnoredKeys } from './constants';\nimport './List.css';\nconst b = block('list');\nconst DEFAULT_ITEM_HEIGHT = 28;\nexport const listDefaultProps = {\n  items: [],\n  itemClassName: '',\n  filterable: true,\n  sortable: false,\n  virtualized: true,\n  deactivateOnLeave: true\n};\nconst reorder = (list, startIndex, endIndex) => {\n  const result = Array.from(list);\n  const [removed] = result.splice(startIndex, 1);\n  result.splice(endIndex, 0, removed);\n  return result;\n};\nexport class List extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      items: this.props.items,\n      filter: ''\n    };\n    this.refFilter = React.createRef();\n    this.refContainer = React.createRef();\n    this.blurTimer = null;\n    this.loadingItem = {\n      value: '__LIST_ITEM_LOADING__',\n      disabled: true\n    };\n    this.uniqId = getUniqId();\n    this.onKeyDown = event => {\n      const {\n        activeItem,\n        pageSize\n      } = this.state;\n      if (listNavigationIgnoredKeys.includes(event.key)) {\n        return;\n      }\n      switch (event.key) {\n        case 'ArrowDown':\n          {\n            this.handleKeyMove(event, 1, -1);\n            break;\n          }\n        case 'ArrowUp':\n          {\n            this.handleKeyMove(event, -1);\n            break;\n          }\n        case 'PageDown':\n          {\n            this.handleKeyMove(event, pageSize);\n            break;\n          }\n        case 'PageUp':\n          {\n            this.handleKeyMove(event, -pageSize);\n            break;\n          }\n        case 'Home':\n          {\n            this.handleKeyMove(event, this.state.items.length - (activeItem || 0));\n            break;\n          }\n        case 'End':\n          {\n            this.handleKeyMove(event, -(activeItem || 0) - 1);\n            break;\n          }\n        case 'Enter':\n          {\n            if (typeof activeItem === 'number' && this.props.onItemClick) {\n              this.props.onItemClick(this.state.items[activeItem], activeItem, true);\n            }\n            break;\n          }\n        default:\n          {\n            if (this.refFilter.current) {\n              this.refFilter.current.focus();\n            }\n          }\n      }\n    };\n    this.renderItemContent = (item, isItemActive, itemIndex) => {\n      const {\n        onLoadMore\n      } = this.props;\n      if (isObject(item) && 'value' in item && item.value === this.loadingItem.value) {\n        return React.createElement(SelectLoadingIndicator, {\n          onIntersect: itemIndex === 0 ? undefined : onLoadMore\n        });\n      }\n      return this.props.renderItem ? this.props.renderItem(item, isItemActive, itemIndex) : defaultRenderItem(item);\n    };\n    this.renderItem = ({\n      index,\n      style,\n      provided,\n      isDragging\n    }) => {\n      var _a;\n      const {\n        sortHandleAlign,\n        role\n      } = this.props;\n      const {\n        items,\n        activeItem\n      } = this.state;\n      const item = this.getItemsWithLoading()[index];\n      const sortable = this.props.sortable && items.length > 1 && !this.getFilter();\n      const active = index === activeItem || index === this.props.activeItemIndex;\n      const selected = Array.isArray(this.props.selectedItemIndex) ? this.props.selectedItemIndex.includes(index) : index === this.props.selectedItemIndex;\n      return React.createElement(ListItem, {\n        key: index,\n        style: style,\n        itemIndex: index,\n        item: item,\n        sortable: sortable,\n        sortHandleAlign: sortHandleAlign,\n        renderItem: this.renderItemContent,\n        itemClassName: this.props.itemClassName,\n        active: active,\n        selected: selected,\n        onActivate: this.onItemActivate,\n        onClick: this.props.onItemClick,\n        role: role === 'listbox' ? 'option' : 'listitem',\n        listId: (_a = this.props.id) !== null && _a !== void 0 ? _a : this.uniqId,\n        provided: provided,\n        isDragging: isDragging\n      });\n    };\n    this.renderVirtualizedItem = ({\n      index,\n      style\n    }) => {\n      return React.createElement(Draggable, {\n        draggableId: String(index),\n        index: index,\n        key: `item-key-${index}`\n      }, provided => this.renderItem({\n        index,\n        style,\n        provided\n      }));\n    };\n    this.filterItem = filter => item => {\n      return String(item).includes(filter);\n    };\n    this.scrollToIndex = index => {\n      const container = this.refContainer.current;\n      if (container) {\n        container.scrollToItem(index);\n      }\n    };\n    this.deactivate = () => {\n      if (!this.blurTimer) {\n        return;\n      }\n      if (this.props.deactivateOnLeave) {\n        this.setState({\n          activeItem: undefined\n        });\n      }\n    };\n    this.handleFocus = () => {\n      if (this.blurTimer) {\n        clearTimeout(this.blurTimer);\n        this.blurTimer = null;\n      }\n    };\n    this.handleBlur = () => {\n      if (!this.blurTimer) {\n        this.blurTimer = setTimeout(this.deactivate, 50);\n      }\n    };\n    this.onUpdateFilterInternal = value => {\n      const {\n        items,\n        filterItem = this.filterItem,\n        onFilterEnd\n      } = this.props;\n      this.setState({\n        filter: value,\n        items: value ? items.filter(filterItem(value)) : items\n      }, () => {\n        if (onFilterEnd) {\n          onFilterEnd({\n            items: this.state.items\n          });\n        }\n      });\n    };\n    this.onFilterUpdate = value => {\n      if (this.props.onFilterUpdate) {\n        this.props.onFilterUpdate(value);\n      } else {\n        this.onUpdateFilterInternal(value);\n      }\n    };\n    this.onItemsRendered = ({\n      visibleStartIndex,\n      visibleStopIndex\n    }) => {\n      this.setState({\n        pageSize: visibleStopIndex - visibleStartIndex\n      });\n    };\n    this.onItemActivate = index => {\n      if (!this.state.sorting) {\n        this.activateItem(index, false);\n      }\n    };\n    this.onMouseLeave = () => {\n      this.deactivate();\n    };\n    this.onSortStart = () => {\n      this.setState({\n        sorting: true\n      });\n    };\n    this.onSortEnd = result => {\n      if (!result.destination) {\n        return;\n      }\n      if (result.source.index === result.destination.index) {\n        return;\n      }\n      const oldIndex = result.source.index;\n      const newIndex = result.destination.index;\n      if (this.props.onSortEnd) {\n        this.props.onSortEnd({\n          oldIndex,\n          newIndex\n        });\n      }\n      const nextItems = reorder(this.getItems(), oldIndex, newIndex);\n      this.setState({\n        activeItem: newIndex,\n        items: nextItems,\n        sorting: false\n      });\n    };\n    this.getItemHeight = index => {\n      const {\n        itemHeight\n      } = this.props;\n      if (typeof itemHeight === 'function') {\n        const {\n          items\n        } = this.state;\n        return itemHeight(items[index], index);\n      }\n      return itemHeight;\n    };\n    this.getVirtualizedItemHeight = index => {\n      return this.getItemHeight(index) || DEFAULT_ITEM_HEIGHT;\n    };\n  }\n  static moveListElement(list, oldIndex, newIndex) {\n    if (oldIndex !== newIndex) {\n      const [item] = list.splice(oldIndex, 1);\n      list.splice(newIndex, 0, item);\n    }\n    return list;\n  }\n  static findNextIndex(list, index, step) {\n    const dataLength = list.length;\n    let currentIndex = (index + dataLength) % dataLength;\n    for (let i = 0; i < dataLength; i += 1) {\n      if (list[currentIndex] && !list[currentIndex].disabled) {\n        return currentIndex;\n      }\n      currentIndex = (currentIndex + dataLength + step) % dataLength;\n    }\n    return undefined;\n  }\n  componentDidUpdate(prevProps, prevState) {\n    if (!isEqual(this.props.items, prevProps.items)) {\n      const filter = this.getFilter();\n      const internalFiltering = filter && !this.props.onFilterUpdate;\n      if (internalFiltering) {\n        this.onUpdateFilterInternal(filter);\n      } else {\n        this.setState({\n          items: this.props.items\n        });\n      }\n    }\n    if (this.props.activeItemIndex !== prevProps.activeItemIndex) {\n      this.activateItem(this.props.activeItemIndex);\n    }\n    if (this.props.onChangeActive && this.state.activeItem !== prevState.activeItem) {\n      this.props.onChangeActive(this.state.activeItem);\n    }\n  }\n  componentWillUnmount() {\n    this.blurTimer = null;\n  }\n  render() {\n    const {\n      emptyPlaceholder,\n      virtualized,\n      className,\n      itemsClassName,\n      qa,\n      role = 'list'\n    } = this.props;\n    const {\n      items\n    } = this.state;\n    return React.createElement(MobileContext.Consumer, null, ({\n      mobile\n    }) =>\n    // The event handler should only be used to capture bubbled events\n    // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n    React.createElement(\"div\", {\n      className: b({\n        mobile\n      }, className),\n      \"data-qa\": qa,\n      tabIndex: -1,\n      onFocus: this.handleFocus,\n      onBlur: this.handleBlur,\n      onKeyDown: this.onKeyDown\n    }, this.renderFilter(), React.createElement(\"div\", {\n      className: b('items', {\n        virtualized\n      }, itemsClassName),\n      style: this.getItemsStyle(),\n      onMouseLeave: this.onMouseLeave,\n      role: role\n    }, this.renderItems(), items.length === 0 && Boolean(emptyPlaceholder) && React.createElement(\"div\", {\n      className: b('empty-placeholder')\n    }, emptyPlaceholder))));\n  }\n  getItems() {\n    return this.state.items;\n  }\n  getItemsWithLoading() {\n    if (this.props.sortable) {\n      return this.getItems();\n    }\n    return this.props.loading ? [...this.state.items, this.loadingItem] : this.getItems();\n  }\n  getActiveItem() {\n    return typeof this.state.activeItem === 'number' ? this.state.activeItem : null;\n  }\n  activateItem(index, scrollTo = true) {\n    if (typeof index === 'number' && scrollTo) {\n      this.scrollToIndex(index);\n    }\n    this.setState({\n      activeItem: index\n    });\n  }\n  renderFilter() {\n    const {\n      size,\n      filterable,\n      filter = this.state.filter,\n      filterPlaceholder,\n      filterClassName = '',\n      autoFocus\n    } = this.props;\n    if (!filterable) {\n      return null;\n    }\n    return React.createElement(\"div\", {\n      className: b('filter', filterClassName)\n    }, React.createElement(TextInput, {\n      controlRef: this.refFilter,\n      size: size,\n      placeholder: filterPlaceholder,\n      value: filter,\n      hasClear: true,\n      onUpdate: this.onFilterUpdate,\n      autoFocus: autoFocus\n    }));\n  }\n  renderSimpleContainer() {\n    const {\n      sortable\n    } = this.props;\n    const items = this.getItemsWithLoading();\n    if (sortable) {\n      return React.createElement(DragDropContext, {\n        onDragStart: this.onSortStart,\n        onDragEnd: this.onSortEnd\n      }, React.createElement(Droppable, {\n        droppableId: \"droppable\",\n        renderClone: (provided, snapshot, rubric) => {\n          return this.renderItem({\n            index: rubric.source.index,\n            provided,\n            isDragging: snapshot.isDragging\n          });\n        }\n      }, droppableProvided => React.createElement(SimpleContainer, {\n        ref: this.refContainer,\n        itemCount: items.length,\n        provided: droppableProvided,\n        sortable: sortable\n      }, items.map((_item, index) => {\n        return React.createElement(Draggable, {\n          draggableId: String(index),\n          index: index,\n          key: `item-key-${index}`\n        }, (provided, snapshot) => {\n          return this.renderItem({\n            index,\n            isDragging: snapshot.isDragging,\n            provided,\n            style: {\n              height: this.getItemHeight(index)\n            }\n          });\n        });\n      }))));\n    }\n    return React.createElement(SimpleContainer, {\n      itemCount: items.length,\n      ref: this.refContainer\n    }, items.map((_item, index) => this.renderItem({\n      index,\n      style: {\n        height: this.getItemHeight(index)\n      }\n    })));\n  }\n  renderVirtualizedContainer() {\n    const items = this.getItems();\n    if (this.props.sortable) {\n      return React.createElement(DragDropContext, {\n        onDragStart: this.onSortStart,\n        onDragEnd: this.onSortEnd\n      }, React.createElement(Droppable, {\n        droppableId: \"droppable\",\n        mode: \"virtual\",\n        renderClone: (provided, snapshot, rubric) => {\n          return this.renderItem({\n            index: rubric.source.index,\n            provided,\n            isDragging: snapshot.isDragging\n          });\n        }\n      }, droppableProvided => React.createElement(AutoSizer, null, ({\n        width,\n        height\n      }) => React.createElement(ListContainer, {\n        ref: this.refContainer,\n        outerRef: droppableProvided.innerRef,\n        width: width,\n        height: height,\n        itemSize: this.getVirtualizedItemHeight,\n        itemData: items,\n        itemCount: items.length,\n        overscanCount: 10,\n        onItemsRendered: this.onItemsRendered,\n        // this property used to rerender items in viewport\n        // must be last, typescript skips checks for all props behind ts-ignore/ts-expect-error\n        // @ts-expect-error\n        activeItem: this.state.activeItem\n      }, this.renderVirtualizedItem))));\n    }\n    return React.createElement(AutoSizer, null, ({\n      width,\n      height\n    }) => React.createElement(ListContainer, {\n      ref: this.refContainer,\n      width: width,\n      height: height,\n      itemSize: this.getVirtualizedItemHeight,\n      itemData: items,\n      itemCount: items.length,\n      overscanCount: 10,\n      onItemsRendered: this.onItemsRendered,\n      // this property used to rerender items in viewport\n      // must be last, typescript skips checks for all props behind ts-ignore/ts-expect-error\n      // @ts-expect-error\n      activeItem: this.state.activeItem\n    }, this.renderItem));\n  }\n  renderItems() {\n    if (this.props.virtualized) {\n      return this.renderVirtualizedContainer();\n    } else {\n      return this.renderSimpleContainer();\n    }\n  }\n  getFilter() {\n    const {\n      filter = this.state.filter\n    } = this.props;\n    return filter;\n  }\n  getItemsStyle() {\n    let {\n      itemsHeight\n    } = this.props;\n    if (typeof itemsHeight === 'function') {\n      itemsHeight = itemsHeight(this.state.items);\n    }\n    return itemsHeight ? {\n      height: itemsHeight\n    } : undefined;\n  }\n  handleKeyMove(event, step, defaultItemIndex = 0) {\n    event.preventDefault();\n    const {\n      activeItem = defaultItemIndex\n    } = this.state;\n    this.activateItem(List.findNextIndex(this.state.items, activeItem + step, Math.sign(step)));\n  }\n}\nList.defaultProps = listDefaultProps;","map":{"version":3,"names":["React","isEqual","isObject","DragDropContext","Draggable","Droppable","AutoSizer","VariableSizeList","ListContainer","SelectLoadingIndicator","TextInput","MobileContext","block","getUniqId","ListItem","SimpleContainer","defaultRenderItem","listNavigationIgnoredKeys","b","DEFAULT_ITEM_HEIGHT","listDefaultProps","items","itemClassName","filterable","sortable","virtualized","deactivateOnLeave","reorder","list","startIndex","endIndex","result","Array","from","removed","splice","List","Component","constructor","arguments","state","props","filter","refFilter","createRef","refContainer","blurTimer","loadingItem","value","disabled","uniqId","onKeyDown","event","activeItem","pageSize","includes","key","handleKeyMove","length","onItemClick","current","focus","renderItemContent","item","isItemActive","itemIndex","onLoadMore","createElement","onIntersect","undefined","renderItem","index","style","provided","isDragging","_a","sortHandleAlign","role","getItemsWithLoading","getFilter","active","activeItemIndex","selected","isArray","selectedItemIndex","onActivate","onItemActivate","onClick","listId","id","renderVirtualizedItem","draggableId","String","filterItem","scrollToIndex","container","scrollToItem","deactivate","setState","handleFocus","clearTimeout","handleBlur","setTimeout","onUpdateFilterInternal","onFilterEnd","onFilterUpdate","onItemsRendered","visibleStartIndex","visibleStopIndex","sorting","activateItem","onMouseLeave","onSortStart","onSortEnd","destination","source","oldIndex","newIndex","nextItems","getItems","getItemHeight","itemHeight","getVirtualizedItemHeight","moveListElement","findNextIndex","step","dataLength","currentIndex","i","componentDidUpdate","prevProps","prevState","internalFiltering","onChangeActive","componentWillUnmount","render","emptyPlaceholder","className","itemsClassName","qa","Consumer","mobile","tabIndex","onFocus","onBlur","renderFilter","getItemsStyle","renderItems","Boolean","loading","getActiveItem","scrollTo","size","filterPlaceholder","filterClassName","autoFocus","controlRef","placeholder","hasClear","onUpdate","renderSimpleContainer","onDragStart","onDragEnd","droppableId","renderClone","snapshot","rubric","droppableProvided","ref","itemCount","map","_item","height","renderVirtualizedContainer","mode","width","outerRef","innerRef","itemSize","itemData","overscanCount","itemsHeight","defaultItemIndex","preventDefault","Math","sign","defaultProps"],"sources":["/Users/ilaulanov/Documents/SynopsisYard/SYfood/client/node_modules/@gravity-ui/uikit/build/esm/components/List/List.js"],"sourcesContent":["import React from 'react';\nimport isEqual from 'lodash/isEqual';\nimport isObject from 'lodash/isObject';\nimport { DragDropContext, Draggable, Droppable, } from 'react-beautiful-dnd';\nimport AutoSizer from 'react-virtualized-auto-sizer';\nimport { VariableSizeList as ListContainer } from 'react-window';\nimport { SelectLoadingIndicator } from '../Select/components/SelectList/SelectLoadingIndicator';\nimport { TextInput } from '../controls';\nimport { MobileContext } from '../mobile';\nimport { block } from '../utils/cn';\nimport { getUniqId } from '../utils/common';\nimport { ListItem, SimpleContainer, defaultRenderItem } from './components';\nimport { listNavigationIgnoredKeys } from './constants';\nimport './List.css';\nconst b = block('list');\nconst DEFAULT_ITEM_HEIGHT = 28;\nexport const listDefaultProps = {\n    items: [],\n    itemClassName: '',\n    filterable: true,\n    sortable: false,\n    virtualized: true,\n    deactivateOnLeave: true,\n};\nconst reorder = (list, startIndex, endIndex) => {\n    const result = Array.from(list);\n    const [removed] = result.splice(startIndex, 1);\n    result.splice(endIndex, 0, removed);\n    return result;\n};\nexport class List extends React.Component {\n    constructor() {\n        super(...arguments);\n        this.state = {\n            items: this.props.items,\n            filter: '',\n        };\n        this.refFilter = React.createRef();\n        this.refContainer = React.createRef();\n        this.blurTimer = null;\n        this.loadingItem = { value: '__LIST_ITEM_LOADING__', disabled: true };\n        this.uniqId = getUniqId();\n        this.onKeyDown = (event) => {\n            const { activeItem, pageSize } = this.state;\n            if (listNavigationIgnoredKeys.includes(event.key)) {\n                return;\n            }\n            switch (event.key) {\n                case 'ArrowDown': {\n                    this.handleKeyMove(event, 1, -1);\n                    break;\n                }\n                case 'ArrowUp': {\n                    this.handleKeyMove(event, -1);\n                    break;\n                }\n                case 'PageDown': {\n                    this.handleKeyMove(event, pageSize);\n                    break;\n                }\n                case 'PageUp': {\n                    this.handleKeyMove(event, -pageSize);\n                    break;\n                }\n                case 'Home': {\n                    this.handleKeyMove(event, this.state.items.length - (activeItem || 0));\n                    break;\n                }\n                case 'End': {\n                    this.handleKeyMove(event, -(activeItem || 0) - 1);\n                    break;\n                }\n                case 'Enter': {\n                    if (typeof activeItem === 'number' && this.props.onItemClick) {\n                        this.props.onItemClick(this.state.items[activeItem], activeItem, true);\n                    }\n                    break;\n                }\n                default: {\n                    if (this.refFilter.current) {\n                        this.refFilter.current.focus();\n                    }\n                }\n            }\n        };\n        this.renderItemContent = (item, isItemActive, itemIndex) => {\n            const { onLoadMore } = this.props;\n            if (isObject(item) && 'value' in item && item.value === this.loadingItem.value) {\n                return (React.createElement(SelectLoadingIndicator, { onIntersect: itemIndex === 0 ? undefined : onLoadMore }));\n            }\n            return this.props.renderItem\n                ? this.props.renderItem(item, isItemActive, itemIndex)\n                : defaultRenderItem(item);\n        };\n        this.renderItem = ({ index, style, provided, isDragging, }) => {\n            var _a;\n            const { sortHandleAlign, role } = this.props;\n            const { items, activeItem } = this.state;\n            const item = this.getItemsWithLoading()[index];\n            const sortable = this.props.sortable && items.length > 1 && !this.getFilter();\n            const active = index === activeItem || index === this.props.activeItemIndex;\n            const selected = Array.isArray(this.props.selectedItemIndex)\n                ? this.props.selectedItemIndex.includes(index)\n                : index === this.props.selectedItemIndex;\n            return (React.createElement(ListItem, { key: index, style: style, itemIndex: index, item: item, sortable: sortable, sortHandleAlign: sortHandleAlign, renderItem: this.renderItemContent, itemClassName: this.props.itemClassName, active: active, selected: selected, onActivate: this.onItemActivate, onClick: this.props.onItemClick, role: role === 'listbox' ? 'option' : 'listitem', listId: (_a = this.props.id) !== null && _a !== void 0 ? _a : this.uniqId, provided: provided, isDragging: isDragging }));\n        };\n        this.renderVirtualizedItem = ({ index, style, }) => {\n            return (React.createElement(Draggable, { draggableId: String(index), index: index, key: `item-key-${index}` }, (provided) => this.renderItem({ index, style, provided })));\n        };\n        this.filterItem = (filter) => (item) => {\n            return String(item).includes(filter);\n        };\n        this.scrollToIndex = (index) => {\n            const container = this.refContainer.current;\n            if (container) {\n                container.scrollToItem(index);\n            }\n        };\n        this.deactivate = () => {\n            if (!this.blurTimer) {\n                return;\n            }\n            if (this.props.deactivateOnLeave) {\n                this.setState({ activeItem: undefined });\n            }\n        };\n        this.handleFocus = () => {\n            if (this.blurTimer) {\n                clearTimeout(this.blurTimer);\n                this.blurTimer = null;\n            }\n        };\n        this.handleBlur = () => {\n            if (!this.blurTimer) {\n                this.blurTimer = setTimeout(this.deactivate, 50);\n            }\n        };\n        this.onUpdateFilterInternal = (value) => {\n            const { items, filterItem = this.filterItem, onFilterEnd } = this.props;\n            this.setState({\n                filter: value,\n                items: value ? items.filter(filterItem(value)) : items,\n            }, () => {\n                if (onFilterEnd) {\n                    onFilterEnd({ items: this.state.items });\n                }\n            });\n        };\n        this.onFilterUpdate = (value) => {\n            if (this.props.onFilterUpdate) {\n                this.props.onFilterUpdate(value);\n            }\n            else {\n                this.onUpdateFilterInternal(value);\n            }\n        };\n        this.onItemsRendered = ({ visibleStartIndex, visibleStopIndex, }) => {\n            this.setState({\n                pageSize: visibleStopIndex - visibleStartIndex,\n            });\n        };\n        this.onItemActivate = (index) => {\n            if (!this.state.sorting) {\n                this.activateItem(index, false);\n            }\n        };\n        this.onMouseLeave = () => {\n            this.deactivate();\n        };\n        this.onSortStart = () => {\n            this.setState({ sorting: true });\n        };\n        this.onSortEnd = (result) => {\n            if (!result.destination) {\n                return;\n            }\n            if (result.source.index === result.destination.index) {\n                return;\n            }\n            const oldIndex = result.source.index;\n            const newIndex = result.destination.index;\n            if (this.props.onSortEnd) {\n                this.props.onSortEnd({ oldIndex, newIndex });\n            }\n            const nextItems = reorder(this.getItems(), oldIndex, newIndex);\n            this.setState({\n                activeItem: newIndex,\n                items: nextItems,\n                sorting: false,\n            });\n        };\n        this.getItemHeight = (index) => {\n            const { itemHeight } = this.props;\n            if (typeof itemHeight === 'function') {\n                const { items } = this.state;\n                return itemHeight(items[index], index);\n            }\n            return itemHeight;\n        };\n        this.getVirtualizedItemHeight = (index) => {\n            return this.getItemHeight(index) || DEFAULT_ITEM_HEIGHT;\n        };\n    }\n    static moveListElement(list, oldIndex, newIndex) {\n        if (oldIndex !== newIndex) {\n            const [item] = list.splice(oldIndex, 1);\n            list.splice(newIndex, 0, item);\n        }\n        return list;\n    }\n    static findNextIndex(list, index, step) {\n        const dataLength = list.length;\n        let currentIndex = (index + dataLength) % dataLength;\n        for (let i = 0; i < dataLength; i += 1) {\n            if (list[currentIndex] && !list[currentIndex].disabled) {\n                return currentIndex;\n            }\n            currentIndex = (currentIndex + dataLength + step) % dataLength;\n        }\n        return undefined;\n    }\n    componentDidUpdate(prevProps, prevState) {\n        if (!isEqual(this.props.items, prevProps.items)) {\n            const filter = this.getFilter();\n            const internalFiltering = filter && !this.props.onFilterUpdate;\n            if (internalFiltering) {\n                this.onUpdateFilterInternal(filter);\n            }\n            else {\n                this.setState({ items: this.props.items });\n            }\n        }\n        if (this.props.activeItemIndex !== prevProps.activeItemIndex) {\n            this.activateItem(this.props.activeItemIndex);\n        }\n        if (this.props.onChangeActive && this.state.activeItem !== prevState.activeItem) {\n            this.props.onChangeActive(this.state.activeItem);\n        }\n    }\n    componentWillUnmount() {\n        this.blurTimer = null;\n    }\n    render() {\n        const { emptyPlaceholder, virtualized, className, itemsClassName, qa, role = 'list', } = this.props;\n        const { items } = this.state;\n        return (React.createElement(MobileContext.Consumer, null, ({ mobile }) => (\n        // The event handler should only be used to capture bubbled events\n        // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n        React.createElement(\"div\", { className: b({ mobile }, className), \"data-qa\": qa, tabIndex: -1, onFocus: this.handleFocus, onBlur: this.handleBlur, onKeyDown: this.onKeyDown },\n            this.renderFilter(),\n            React.createElement(\"div\", { className: b('items', { virtualized }, itemsClassName), style: this.getItemsStyle(), onMouseLeave: this.onMouseLeave, role: role },\n                this.renderItems(),\n                items.length === 0 && Boolean(emptyPlaceholder) && (React.createElement(\"div\", { className: b('empty-placeholder') }, emptyPlaceholder)))))));\n    }\n    getItems() {\n        return this.state.items;\n    }\n    getItemsWithLoading() {\n        if (this.props.sortable) {\n            return this.getItems();\n        }\n        return this.props.loading ? [...this.state.items, this.loadingItem] : this.getItems();\n    }\n    getActiveItem() {\n        return typeof this.state.activeItem === 'number' ? this.state.activeItem : null;\n    }\n    activateItem(index, scrollTo = true) {\n        if (typeof index === 'number' && scrollTo) {\n            this.scrollToIndex(index);\n        }\n        this.setState({ activeItem: index });\n    }\n    renderFilter() {\n        const { size, filterable, filter = this.state.filter, filterPlaceholder, filterClassName = '', autoFocus, } = this.props;\n        if (!filterable) {\n            return null;\n        }\n        return (React.createElement(\"div\", { className: b('filter', filterClassName) },\n            React.createElement(TextInput, { controlRef: this.refFilter, size: size, placeholder: filterPlaceholder, value: filter, hasClear: true, onUpdate: this.onFilterUpdate, autoFocus: autoFocus })));\n    }\n    renderSimpleContainer() {\n        const { sortable } = this.props;\n        const items = this.getItemsWithLoading();\n        if (sortable) {\n            return (React.createElement(DragDropContext, { onDragStart: this.onSortStart, onDragEnd: this.onSortEnd },\n                React.createElement(Droppable, { droppableId: \"droppable\", renderClone: (provided, snapshot, rubric) => {\n                        return this.renderItem({\n                            index: rubric.source.index,\n                            provided,\n                            isDragging: snapshot.isDragging,\n                        });\n                    } }, (droppableProvided) => (React.createElement(SimpleContainer, { ref: this.refContainer, itemCount: items.length, provided: droppableProvided, sortable: sortable }, items.map((_item, index) => {\n                    return (React.createElement(Draggable, { draggableId: String(index), index: index, key: `item-key-${index}` }, (provided, snapshot) => {\n                        return this.renderItem({\n                            index,\n                            isDragging: snapshot.isDragging,\n                            provided,\n                            style: { height: this.getItemHeight(index) },\n                        });\n                    }));\n                }))))));\n        }\n        return (React.createElement(SimpleContainer, { itemCount: items.length, ref: this.refContainer }, items.map((_item, index) => this.renderItem({ index, style: { height: this.getItemHeight(index) } }))));\n    }\n    renderVirtualizedContainer() {\n        const items = this.getItems();\n        if (this.props.sortable) {\n            return (React.createElement(DragDropContext, { onDragStart: this.onSortStart, onDragEnd: this.onSortEnd },\n                React.createElement(Droppable, { droppableId: \"droppable\", mode: \"virtual\", renderClone: (provided, snapshot, rubric) => {\n                        return this.renderItem({\n                            index: rubric.source.index,\n                            provided,\n                            isDragging: snapshot.isDragging,\n                        });\n                    } }, (droppableProvided) => (React.createElement(AutoSizer, null, ({ width, height }) => (React.createElement(ListContainer, { ref: this.refContainer, outerRef: droppableProvided.innerRef, width: width, height: height, itemSize: this.getVirtualizedItemHeight, itemData: items, itemCount: items.length, overscanCount: 10, onItemsRendered: this.onItemsRendered, \n                    // this property used to rerender items in viewport\n                    // must be last, typescript skips checks for all props behind ts-ignore/ts-expect-error\n                    // @ts-expect-error\n                    activeItem: this.state.activeItem }, this.renderVirtualizedItem)))))));\n        }\n        return (React.createElement(AutoSizer, null, ({ width, height }) => (React.createElement(ListContainer, { ref: this.refContainer, width: width, height: height, itemSize: this.getVirtualizedItemHeight, itemData: items, itemCount: items.length, overscanCount: 10, onItemsRendered: this.onItemsRendered, \n            // this property used to rerender items in viewport\n            // must be last, typescript skips checks for all props behind ts-ignore/ts-expect-error\n            // @ts-expect-error\n            activeItem: this.state.activeItem }, this.renderItem))));\n    }\n    renderItems() {\n        if (this.props.virtualized) {\n            return this.renderVirtualizedContainer();\n        }\n        else {\n            return this.renderSimpleContainer();\n        }\n    }\n    getFilter() {\n        const { filter = this.state.filter } = this.props;\n        return filter;\n    }\n    getItemsStyle() {\n        let { itemsHeight } = this.props;\n        if (typeof itemsHeight === 'function') {\n            itemsHeight = itemsHeight(this.state.items);\n        }\n        return itemsHeight ? { height: itemsHeight } : undefined;\n    }\n    handleKeyMove(event, step, defaultItemIndex = 0) {\n        event.preventDefault();\n        const { activeItem = defaultItemIndex } = this.state;\n        this.activateItem(List.findNextIndex(this.state.items, activeItem + step, Math.sign(step)));\n    }\n}\nList.defaultProps = listDefaultProps;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}