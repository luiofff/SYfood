{"ast":null,"code":"import React from 'react';\nimport { block } from '../utils/cn';\nimport { isIcon } from '../utils/common';\nimport { eventBroker } from '../utils/event-broker';\nimport { isOfType } from '../utils/isOfType';\nimport { ButtonIcon } from './ButtonIcon';\nimport './Button.css';\nconst b = block('button');\nconst ButtonWithHandlers = React.forwardRef(function Button({\n  view = 'normal',\n  size = 'm',\n  pin = 'round-round',\n  selected,\n  disabled = false,\n  loading = false,\n  width,\n  title,\n  tabIndex,\n  type = 'button',\n  component,\n  href,\n  target,\n  rel,\n  extraProps,\n  onClick,\n  onMouseEnter,\n  onMouseLeave,\n  onFocus,\n  onBlur,\n  children,\n  id,\n  style,\n  className,\n  qa\n}, ref) {\n  const handleClickCapture = React.useCallback(event => {\n    eventBroker.publish({\n      componentId: 'Button',\n      eventId: 'click',\n      domEvent: event,\n      meta: {\n        content: event.currentTarget.textContent,\n        view\n      }\n    });\n  }, [view]);\n  const commonProps = {\n    title,\n    tabIndex,\n    onClick,\n    onClickCapture: handleClickCapture,\n    onMouseEnter,\n    onMouseLeave,\n    onFocus,\n    onBlur,\n    id,\n    style,\n    className: b({\n      view,\n      size,\n      pin,\n      selected,\n      disabled: disabled || loading,\n      loading,\n      width\n    }, className),\n    'data-qa': qa\n  };\n  if (typeof href === 'string' || component) {\n    const linkProps = {\n      href,\n      target,\n      rel: target === '_blank' && !rel ? 'noopener noreferrer' : rel\n    };\n    return React.createElement(component || 'a', Object.assign(Object.assign(Object.assign(Object.assign({}, extraProps), commonProps), component ? {} : linkProps), {\n      ref: ref,\n      'aria-disabled': disabled || loading\n    }), prepareChildren(children));\n  } else {\n    return React.createElement(\"button\", Object.assign({}, extraProps, commonProps, {\n      ref: ref,\n      type: type,\n      disabled: disabled || loading,\n      \"aria-pressed\": selected\n    }), prepareChildren(children));\n  }\n});\nButtonWithHandlers.displayName = 'Button';\nexport const Button = Object.assign(ButtonWithHandlers, {\n  Icon: ButtonIcon\n});\nconst isButtonIconComponent = isOfType(ButtonIcon);\nfunction prepareChildren(children) {\n  const items = React.Children.toArray(children);\n  if (items.length === 1) {\n    const onlyItem = items[0];\n    if (isButtonIconComponent(onlyItem)) {\n      return onlyItem;\n    } else if (isIcon(onlyItem)) {\n      return React.createElement(Button.Icon, {\n        key: \"icon\"\n      }, onlyItem);\n    } else {\n      return React.createElement(\"span\", {\n        key: \"text\",\n        className: b('text')\n      }, onlyItem);\n    }\n  } else {\n    let leftIcon, rightIcon, text;\n    const content = [];\n    for (const item of items) {\n      const isIconElement = isIcon(item);\n      const isButtonIconElement = isButtonIconComponent(item);\n      if (isIconElement || isButtonIconElement) {\n        if (!leftIcon && content.length === 0) {\n          const key = 'icon-left';\n          const side = 'left';\n          if (isIconElement) {\n            leftIcon = React.createElement(Button.Icon, {\n              key: key,\n              side: side\n            }, item);\n          } else {\n            leftIcon = React.cloneElement(item, {\n              side\n            });\n          }\n        } else if (!rightIcon && content.length !== 0) {\n          const key = 'icon-right';\n          const side = 'right';\n          if (isIconElement) {\n            rightIcon = React.createElement(Button.Icon, {\n              key: key,\n              side: side\n            }, item);\n          } else {\n            rightIcon = React.cloneElement(item, {\n              side\n            });\n          }\n        }\n      } else {\n        content.push(item);\n      }\n    }\n    if (content.length > 0) {\n      text = React.createElement(\"span\", {\n        key: \"text\",\n        className: b('text')\n      }, content);\n    }\n    return [leftIcon, rightIcon, text];\n  }\n}","map":{"version":3,"names":["React","block","isIcon","eventBroker","isOfType","ButtonIcon","b","ButtonWithHandlers","forwardRef","Button","view","size","pin","selected","disabled","loading","width","title","tabIndex","type","component","href","target","rel","extraProps","onClick","onMouseEnter","onMouseLeave","onFocus","onBlur","children","id","style","className","qa","ref","handleClickCapture","useCallback","event","publish","componentId","eventId","domEvent","meta","content","currentTarget","textContent","commonProps","onClickCapture","linkProps","createElement","Object","assign","prepareChildren","displayName","Icon","isButtonIconComponent","items","Children","toArray","length","onlyItem","key","leftIcon","rightIcon","text","item","isIconElement","isButtonIconElement","side","cloneElement","push"],"sources":["/Users/ilaulanov/node_modules/@gravity-ui/uikit/build/esm/components/Button/Button.js"],"sourcesContent":["import React from 'react';\nimport { block } from '../utils/cn';\nimport { isIcon } from '../utils/common';\nimport { eventBroker } from '../utils/event-broker';\nimport { isOfType } from '../utils/isOfType';\nimport { ButtonIcon } from './ButtonIcon';\nimport './Button.css';\nconst b = block('button');\nconst ButtonWithHandlers = React.forwardRef(function Button({ view = 'normal', size = 'm', pin = 'round-round', selected, disabled = false, loading = false, width, title, tabIndex, type = 'button', component, href, target, rel, extraProps, onClick, onMouseEnter, onMouseLeave, onFocus, onBlur, children, id, style, className, qa, }, ref) {\n    const handleClickCapture = React.useCallback((event) => {\n        eventBroker.publish({\n            componentId: 'Button',\n            eventId: 'click',\n            domEvent: event,\n            meta: {\n                content: event.currentTarget.textContent,\n                view,\n            },\n        });\n    }, [view]);\n    const commonProps = {\n        title,\n        tabIndex,\n        onClick,\n        onClickCapture: handleClickCapture,\n        onMouseEnter,\n        onMouseLeave,\n        onFocus,\n        onBlur,\n        id,\n        style,\n        className: b({\n            view,\n            size,\n            pin,\n            selected,\n            disabled: disabled || loading,\n            loading,\n            width,\n        }, className),\n        'data-qa': qa,\n    };\n    if (typeof href === 'string' || component) {\n        const linkProps = {\n            href,\n            target,\n            rel: target === '_blank' && !rel ? 'noopener noreferrer' : rel,\n        };\n        return React.createElement(component || 'a', Object.assign(Object.assign(Object.assign(Object.assign({}, extraProps), commonProps), (component ? {} : linkProps)), { ref: ref, 'aria-disabled': disabled || loading }), prepareChildren(children));\n    }\n    else {\n        return (React.createElement(\"button\", Object.assign({}, extraProps, commonProps, { ref: ref, type: type, disabled: disabled || loading, \"aria-pressed\": selected }), prepareChildren(children)));\n    }\n});\nButtonWithHandlers.displayName = 'Button';\nexport const Button = Object.assign(ButtonWithHandlers, { Icon: ButtonIcon });\nconst isButtonIconComponent = isOfType(ButtonIcon);\nfunction prepareChildren(children) {\n    const items = React.Children.toArray(children);\n    if (items.length === 1) {\n        const onlyItem = items[0];\n        if (isButtonIconComponent(onlyItem)) {\n            return onlyItem;\n        }\n        else if (isIcon(onlyItem)) {\n            return React.createElement(Button.Icon, { key: \"icon\" }, onlyItem);\n        }\n        else {\n            return (React.createElement(\"span\", { key: \"text\", className: b('text') }, onlyItem));\n        }\n    }\n    else {\n        let leftIcon, rightIcon, text;\n        const content = [];\n        for (const item of items) {\n            const isIconElement = isIcon(item);\n            const isButtonIconElement = isButtonIconComponent(item);\n            if (isIconElement || isButtonIconElement) {\n                if (!leftIcon && content.length === 0) {\n                    const key = 'icon-left';\n                    const side = 'left';\n                    if (isIconElement) {\n                        leftIcon = (React.createElement(Button.Icon, { key: key, side: side }, item));\n                    }\n                    else {\n                        leftIcon = React.cloneElement(item, {\n                            side,\n                        });\n                    }\n                }\n                else if (!rightIcon && content.length !== 0) {\n                    const key = 'icon-right';\n                    const side = 'right';\n                    if (isIconElement) {\n                        rightIcon = (React.createElement(Button.Icon, { key: key, side: side }, item));\n                    }\n                    else {\n                        rightIcon = React.cloneElement(item, {\n                            side,\n                        });\n                    }\n                }\n            }\n            else {\n                content.push(item);\n            }\n        }\n        if (content.length > 0) {\n            text = (React.createElement(\"span\", { key: \"text\", className: b('text') }, content));\n        }\n        return [leftIcon, rightIcon, text];\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}