{"ast":null,"code":"import React from 'react';\nimport { Xmark } from '@gravity-ui/icons';\nimport { Button } from '../Button';\nimport { Icon } from '../Icon';\nimport { Popup } from '../Popup';\nimport { cnPopover } from './Popover.classname';\nimport { Buttons } from './components/Buttons/Buttons';\nimport { Content } from './components/Content/Content';\nimport { Links } from './components/Links/Links';\nimport { Trigger } from './components/Trigger/Trigger';\nimport { PopoverBehavior } from './config';\nimport { useOpen } from './hooks/useOpen';\nimport './Popover.css';\nexport const Popover = React.forwardRef(function (_ref, ref) {\n  let {\n    initialOpen = false,\n    disabled = false,\n    autoclosable = true,\n    openOnHover = true,\n    delayOpening,\n    delayClosing,\n    behavior = PopoverBehavior.Delayed,\n    placement = ['right', 'bottom'],\n    offset = {},\n    tooltipOffset,\n    tooltipClassName,\n    tooltipContentClassName,\n    theme = 'info',\n    size = 's',\n    hasArrow = true,\n    hasClose = false,\n    className,\n    children,\n    title,\n    content,\n    htmlContent,\n    contentClassName,\n    links,\n    forceLinksAppearance = false,\n    tooltipActionButton,\n    tooltipCancelButton,\n    onOpenChange,\n    onCloseClick,\n    onClick,\n    anchorRef,\n    strategy,\n    qa,\n    disablePortal = false,\n    tooltipId,\n    focusTrap,\n    autoFocus,\n    restoreFocusRef,\n    modifiers\n  } = _ref;\n  const controlRef = React.useRef(null);\n  const closedManually = React.useRef(false);\n  const shouldBeOpen = React.useRef(initialOpen);\n  const {\n    isOpen,\n    closingTimeout,\n    openTooltip,\n    openTooltipDelayed,\n    unsetOpeningTimeout,\n    closeTooltip,\n    closeTooltipDelayed,\n    unsetClosingTimeout\n  } = useOpen({\n    initialOpen,\n    disabled,\n    autoclosable,\n    onOpenChange,\n    delayOpening,\n    delayClosing,\n    behavior,\n    shouldBeOpen\n  });\n  React.useImperativeHandle(ref, () => ({\n    openTooltip,\n    closeTooltip\n  }), [openTooltip, closeTooltip]);\n  const handleCloseClick = async event => {\n    closeTooltip();\n    onCloseClick === null || onCloseClick === void 0 ? void 0 : onCloseClick(event);\n  };\n  const hasTitle = Boolean(title);\n  const tooltip = React.createElement(Popup, {\n    id: tooltipId,\n    role: openOnHover ? 'tooltip' : 'dialog',\n    strategy: strategy,\n    anchorRef: anchorRef || controlRef,\n    className: cnPopover('tooltip', {\n      theme,\n      size,\n      ['with-close']: hasClose,\n      'force-links-appearance': forceLinksAppearance\n    }, tooltipClassName),\n    contentClassName: cnPopover('tooltip-popup-content', tooltipContentClassName),\n    open: isOpen,\n    placement: placement,\n    hasArrow: hasArrow,\n    offset: tooltipOffset,\n    onClose: anchorRef ? undefined : closeTooltip,\n    qa: qa ? \"\".concat(qa, \"-tooltip\") : '',\n    disablePortal: disablePortal,\n    focusTrap: focusTrap,\n    autoFocus: autoFocus,\n    restoreFocus: true,\n    restoreFocusRef: restoreFocusRef || controlRef,\n    modifiers: modifiers\n  }, React.createElement(React.Fragment, null, title && React.createElement(\"h3\", {\n    className: cnPopover('tooltip-title')\n  }, title), React.createElement(Content, {\n    secondary: hasTitle ? theme !== 'announcement' : false,\n    content: content,\n    htmlContent: htmlContent,\n    className: contentClassName\n  }), links && React.createElement(Links, {\n    links: links\n  }), React.createElement(Buttons, {\n    theme: theme,\n    tooltipActionButton: tooltipActionButton,\n    tooltipCancelButton: tooltipCancelButton\n  }), hasClose && React.createElement(\"div\", {\n    className: cnPopover('tooltip-close')\n  }, React.createElement(Button, {\n    size: \"s\",\n    view: \"flat-secondary\",\n    onClick: handleCloseClick,\n    extraProps: {\n      'aria-label': 'Close'\n    }\n  }, React.createElement(Icon, {\n    data: Xmark,\n    size: 16\n  })))));\n  if (anchorRef) {\n    return tooltip;\n  }\n  const onMouseEnter = () => {\n    unsetClosingTimeout();\n    if (!isOpen && !disabled && !closedManually.current) {\n      openTooltipDelayed();\n    } else {\n      shouldBeOpen.current = true;\n    }\n  };\n  const onMouseLeave = () => {\n    if (autoclosable && !closedManually.current && !closingTimeout.current) {\n      unsetOpeningTimeout();\n      closeTooltipDelayed();\n    } else {\n      shouldBeOpen.current = false;\n    }\n    closedManually.current = false;\n  };\n  return React.createElement(\"div\", {\n    ref: controlRef,\n    className: cnPopover({\n      disabled\n    }, className),\n    onMouseEnter: openOnHover ? onMouseEnter : undefined,\n    onMouseLeave: openOnHover ? onMouseLeave : undefined,\n    onFocus: openOnHover ? onMouseEnter : undefined,\n    onBlur: openOnHover ? onMouseLeave : undefined,\n    style: {\n      top: offset.top,\n      left: offset.left\n    },\n    \"data-qa\": qa\n  }, React.createElement(Trigger, {\n    closeTooltip: closeTooltip,\n    openTooltip: openTooltip,\n    open: isOpen,\n    openOnHover: openOnHover,\n    className: cnPopover('handler'),\n    disabled: disabled,\n    onClick: onClick,\n    closedManually: closedManually\n  }, children), tooltip);\n});\nPopover.displayName = 'Popover';","map":{"version":3,"names":["React","Xmark","Button","Icon","Popup","cnPopover","Buttons","Content","Links","Trigger","PopoverBehavior","useOpen","Popover","forwardRef","_ref","ref","initialOpen","disabled","autoclosable","openOnHover","delayOpening","delayClosing","behavior","Delayed","placement","offset","tooltipOffset","tooltipClassName","tooltipContentClassName","theme","size","hasArrow","hasClose","className","children","title","content","htmlContent","contentClassName","links","forceLinksAppearance","tooltipActionButton","tooltipCancelButton","onOpenChange","onCloseClick","onClick","anchorRef","strategy","qa","disablePortal","tooltipId","focusTrap","autoFocus","restoreFocusRef","modifiers","controlRef","useRef","closedManually","shouldBeOpen","isOpen","closingTimeout","openTooltip","openTooltipDelayed","unsetOpeningTimeout","closeTooltip","closeTooltipDelayed","unsetClosingTimeout","useImperativeHandle","handleCloseClick","event","hasTitle","Boolean","tooltip","createElement","id","role","open","onClose","undefined","concat","restoreFocus","Fragment","secondary","view","extraProps","data","onMouseEnter","current","onMouseLeave","onFocus","onBlur","style","top","left","displayName"],"sources":["/Users/ilaulanov/Documents/SynopsisYard/SYfood/client/node_modules/@gravity-ui/uikit/build/esm/components/Popover/Popover.js"],"sourcesContent":["import React from 'react';\nimport { Xmark } from '@gravity-ui/icons';\nimport { Button } from '../Button';\nimport { Icon } from '../Icon';\nimport { Popup } from '../Popup';\nimport { cnPopover } from './Popover.classname';\nimport { Buttons } from './components/Buttons/Buttons';\nimport { Content } from './components/Content/Content';\nimport { Links } from './components/Links/Links';\nimport { Trigger } from './components/Trigger/Trigger';\nimport { PopoverBehavior } from './config';\nimport { useOpen } from './hooks/useOpen';\nimport './Popover.css';\nexport const Popover = React.forwardRef(function ({ initialOpen = false, disabled = false, autoclosable = true, openOnHover = true, delayOpening, delayClosing, behavior = PopoverBehavior.Delayed, placement = ['right', 'bottom'], offset = {}, tooltipOffset, tooltipClassName, tooltipContentClassName, theme = 'info', size = 's', hasArrow = true, hasClose = false, className, children, title, content, htmlContent, contentClassName, links, forceLinksAppearance = false, tooltipActionButton, tooltipCancelButton, onOpenChange, onCloseClick, onClick, anchorRef, strategy, qa, disablePortal = false, tooltipId, focusTrap, autoFocus, restoreFocusRef, modifiers, }, ref) {\n    const controlRef = React.useRef(null);\n    const closedManually = React.useRef(false);\n    const shouldBeOpen = React.useRef(initialOpen);\n    const { isOpen, closingTimeout, openTooltip, openTooltipDelayed, unsetOpeningTimeout, closeTooltip, closeTooltipDelayed, unsetClosingTimeout, } = useOpen({\n        initialOpen,\n        disabled,\n        autoclosable,\n        onOpenChange,\n        delayOpening,\n        delayClosing,\n        behavior,\n        shouldBeOpen,\n    });\n    React.useImperativeHandle(ref, () => ({\n        openTooltip,\n        closeTooltip,\n    }), [openTooltip, closeTooltip]);\n    const handleCloseClick = async (event) => {\n        closeTooltip();\n        onCloseClick === null || onCloseClick === void 0 ? void 0 : onCloseClick(event);\n    };\n    const hasTitle = Boolean(title);\n    const tooltip = (React.createElement(Popup, { id: tooltipId, role: openOnHover ? 'tooltip' : 'dialog', strategy: strategy, anchorRef: anchorRef || controlRef, className: cnPopover('tooltip', {\n            theme,\n            size,\n            ['with-close']: hasClose,\n            'force-links-appearance': forceLinksAppearance,\n        }, tooltipClassName), contentClassName: cnPopover('tooltip-popup-content', tooltipContentClassName), open: isOpen, placement: placement, hasArrow: hasArrow, offset: tooltipOffset, onClose: anchorRef ? undefined : closeTooltip, qa: qa ? `${qa}-tooltip` : '', disablePortal: disablePortal, focusTrap: focusTrap, autoFocus: autoFocus, restoreFocus: true, restoreFocusRef: restoreFocusRef || controlRef, modifiers: modifiers },\n        React.createElement(React.Fragment, null,\n            title && React.createElement(\"h3\", { className: cnPopover('tooltip-title') }, title),\n            React.createElement(Content, { secondary: hasTitle ? theme !== 'announcement' : false, content: content, htmlContent: htmlContent, className: contentClassName }),\n            links && React.createElement(Links, { links: links }),\n            React.createElement(Buttons, { theme: theme, tooltipActionButton: tooltipActionButton, tooltipCancelButton: tooltipCancelButton }),\n            hasClose && (React.createElement(\"div\", { className: cnPopover('tooltip-close') },\n                React.createElement(Button, { size: \"s\", view: \"flat-secondary\", onClick: handleCloseClick, extraProps: {\n                        'aria-label': 'Close',\n                    } },\n                    React.createElement(Icon, { data: Xmark, size: 16 })))))));\n    if (anchorRef) {\n        return tooltip;\n    }\n    const onMouseEnter = () => {\n        unsetClosingTimeout();\n        if (!isOpen && !disabled && !closedManually.current) {\n            openTooltipDelayed();\n        }\n        else {\n            shouldBeOpen.current = true;\n        }\n    };\n    const onMouseLeave = () => {\n        if (autoclosable && !closedManually.current && !closingTimeout.current) {\n            unsetOpeningTimeout();\n            closeTooltipDelayed();\n        }\n        else {\n            shouldBeOpen.current = false;\n        }\n        closedManually.current = false;\n    };\n    return (React.createElement(\"div\", { ref: controlRef, className: cnPopover({ disabled }, className), onMouseEnter: openOnHover ? onMouseEnter : undefined, onMouseLeave: openOnHover ? onMouseLeave : undefined, onFocus: openOnHover ? onMouseEnter : undefined, onBlur: openOnHover ? onMouseLeave : undefined, style: {\n            top: offset.top,\n            left: offset.left,\n        }, \"data-qa\": qa },\n        React.createElement(Trigger, { closeTooltip: closeTooltip, openTooltip: openTooltip, open: isOpen, openOnHover: openOnHover, className: cnPopover('handler'), disabled: disabled, onClick: onClick, closedManually: closedManually }, children),\n        tooltip));\n});\nPopover.displayName = 'Popover';\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}