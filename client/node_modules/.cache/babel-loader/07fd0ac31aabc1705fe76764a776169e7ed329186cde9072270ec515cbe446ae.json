{"ast":null,"code":"import React from 'react';\nimport get from 'lodash/get';\nimport ReactDOM from 'react-dom';\nimport { block } from '../utils/cn';\nimport { ToasterProvider } from './Provider/ToasterProvider';\nimport { ToasterComponent } from './ToasterComponent/ToasterComponent';\nconst TOASTER_KEY = Symbol('Toaster instance key');\nconst bToaster = block('toaster');\nlet ReactDOMClient;\nexport class ToasterSingleton {\n  static injectReactDOMClient(client) {\n    ReactDOMClient = client;\n  }\n  constructor(args) {\n    this.className = '';\n    this.mobile = false;\n    this.componentAPI = null;\n    this.add = options => {\n      var _a;\n      (_a = this.componentAPI) === null || _a === void 0 ? void 0 : _a.add(options);\n    };\n    this.remove = name => {\n      var _a;\n      (_a = this.componentAPI) === null || _a === void 0 ? void 0 : _a.remove(name);\n    };\n    this.removeAll = () => {\n      var _a;\n      (_a = this.componentAPI) === null || _a === void 0 ? void 0 : _a.removeAll();\n    };\n    this.update = (name, overrideOptions) => {\n      var _a;\n      (_a = this.componentAPI) === null || _a === void 0 ? void 0 : _a.update(name, overrideOptions);\n    };\n    this.has = name => {\n      var _a, _b;\n      return (_b = (_a = this.componentAPI) === null || _a === void 0 ? void 0 : _a.has(name)) !== null && _b !== void 0 ? _b : false;\n    };\n    const className = get(args, ['className'], '');\n    const mobile = get(args, ['mobile'], false);\n    if (window[TOASTER_KEY] instanceof ToasterSingleton) {\n      const me = window[TOASTER_KEY];\n      me.className = className;\n      me.mobile = mobile;\n      me.setRootNodeClassName();\n      return me;\n    }\n    this.className = className;\n    this.mobile = mobile;\n    this.createRootNode();\n    this.createReactRoot();\n    this.render();\n    window[TOASTER_KEY] = this;\n  }\n  destroy() {\n    ReactDOM.unmountComponentAtNode(this.rootNode);\n    document.body.removeChild(this.rootNode);\n  }\n  createRootNode() {\n    this.rootNode = document.createElement('div');\n    this.setRootNodeClassName();\n    document.body.appendChild(this.rootNode);\n  }\n  createReactRoot() {\n    if (ReactDOMClient) {\n      this.reactRoot = ReactDOMClient.createRoot(this.rootNode);\n    }\n  }\n  render() {\n    const container = React.createElement(ToasterProvider, {\n      ref: api => {\n        this.componentAPI = api;\n      }\n    }, React.createElement(ToasterComponent, {\n      hasPortal: false,\n      mobile: this.mobile\n    }));\n    if (this.reactRoot) {\n      this.reactRoot.render(container);\n    } else {\n      ReactDOM.render(container, this.rootNode, () => Promise.resolve());\n    }\n  }\n  setRootNodeClassName() {\n    this.rootNode.className = bToaster({\n      mobile: this.mobile\n    }, this.className);\n  }\n}","map":{"version":3,"names":["React","get","ReactDOM","block","ToasterProvider","ToasterComponent","TOASTER_KEY","Symbol","bToaster","ReactDOMClient","ToasterSingleton","injectReactDOMClient","client","constructor","args","className","mobile","componentAPI","add","options","_a","remove","name","removeAll","update","overrideOptions","has","_b","window","me","setRootNodeClassName","createRootNode","createReactRoot","render","destroy","unmountComponentAtNode","rootNode","document","body","removeChild","createElement","appendChild","reactRoot","createRoot","container","ref","api","hasPortal","Promise","resolve"],"sources":["/Users/ilaulanov/Documents/SynopsisYard/SYfood/client/node_modules/@gravity-ui/uikit/build/esm/components/Toaster/ToasterSingleton.js"],"sourcesContent":["import React from 'react';\nimport get from 'lodash/get';\nimport ReactDOM from 'react-dom';\nimport { block } from '../utils/cn';\nimport { ToasterProvider } from './Provider/ToasterProvider';\nimport { ToasterComponent } from './ToasterComponent/ToasterComponent';\nconst TOASTER_KEY = Symbol('Toaster instance key');\nconst bToaster = block('toaster');\nlet ReactDOMClient;\nexport class ToasterSingleton {\n    static injectReactDOMClient(client) {\n        ReactDOMClient = client;\n    }\n    constructor(args) {\n        this.className = '';\n        this.mobile = false;\n        this.componentAPI = null;\n        this.add = (options) => {\n            var _a;\n            (_a = this.componentAPI) === null || _a === void 0 ? void 0 : _a.add(options);\n        };\n        this.remove = (name) => {\n            var _a;\n            (_a = this.componentAPI) === null || _a === void 0 ? void 0 : _a.remove(name);\n        };\n        this.removeAll = () => {\n            var _a;\n            (_a = this.componentAPI) === null || _a === void 0 ? void 0 : _a.removeAll();\n        };\n        this.update = (name, overrideOptions) => {\n            var _a;\n            (_a = this.componentAPI) === null || _a === void 0 ? void 0 : _a.update(name, overrideOptions);\n        };\n        this.has = (name) => {\n            var _a, _b;\n            return (_b = (_a = this.componentAPI) === null || _a === void 0 ? void 0 : _a.has(name)) !== null && _b !== void 0 ? _b : false;\n        };\n        const className = get(args, ['className'], '');\n        const mobile = get(args, ['mobile'], false);\n        if (window[TOASTER_KEY] instanceof ToasterSingleton) {\n            const me = window[TOASTER_KEY];\n            me.className = className;\n            me.mobile = mobile;\n            me.setRootNodeClassName();\n            return me;\n        }\n        this.className = className;\n        this.mobile = mobile;\n        this.createRootNode();\n        this.createReactRoot();\n        this.render();\n        window[TOASTER_KEY] = this;\n    }\n    destroy() {\n        ReactDOM.unmountComponentAtNode(this.rootNode);\n        document.body.removeChild(this.rootNode);\n    }\n    createRootNode() {\n        this.rootNode = document.createElement('div');\n        this.setRootNodeClassName();\n        document.body.appendChild(this.rootNode);\n    }\n    createReactRoot() {\n        if (ReactDOMClient) {\n            this.reactRoot = ReactDOMClient.createRoot(this.rootNode);\n        }\n    }\n    render() {\n        const container = (React.createElement(ToasterProvider, { ref: (api) => {\n                this.componentAPI = api;\n            } },\n            React.createElement(ToasterComponent, { hasPortal: false, mobile: this.mobile })));\n        if (this.reactRoot) {\n            this.reactRoot.render(container);\n        }\n        else {\n            ReactDOM.render(container, this.rootNode, () => Promise.resolve());\n        }\n    }\n    setRootNodeClassName() {\n        this.rootNode.className = bToaster({ mobile: this.mobile }, this.className);\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}