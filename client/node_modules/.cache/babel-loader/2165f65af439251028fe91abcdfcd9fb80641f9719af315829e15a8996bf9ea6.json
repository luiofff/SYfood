{"ast":null,"code":"import React from 'react';\nimport { QUICK_SEARCH_TIMEOUT } from '../constants';\nimport { getNextQuickSearch } from '../utils';\nexport const useQuickSearch = props => {\n  const {\n    onChange,\n    open,\n    disabled\n  } = props;\n  const [search, setSearch] = React.useState('');\n  const [timer, setTimer] = React.useState();\n  const handleTimer = React.useCallback(nextSearch => {\n    clearTimeout(timer);\n    if (nextSearch) {\n      const nextTimer = window.setTimeout(() => setSearch(''), QUICK_SEARCH_TIMEOUT);\n      setTimer(nextTimer);\n    }\n  }, [timer]);\n  const handleSearch = React.useCallback(e => {\n    e.stopPropagation();\n    const nextSearch = getNextQuickSearch(e.key, search);\n    if (search !== nextSearch) {\n      handleTimer(nextSearch);\n      setSearch(nextSearch);\n    }\n  }, [handleTimer, search]);\n  React.useEffect(() => {\n    if (open && !disabled) {\n      document.addEventListener('keydown', handleSearch);\n    } else if (!open && !disabled) {\n      setSearch('');\n    }\n    return () => {\n      if (open && !disabled) {\n        document.removeEventListener('keydown', handleSearch);\n      }\n    };\n  }, [handleSearch, open, disabled]);\n  React.useEffect(() => {\n    if (!open) {\n      clearTimeout(timer);\n    }\n    return () => clearTimeout(timer);\n  }, [open, timer]);\n  React.useEffect(() => {\n    onChange(search);\n  }, [onChange, search]);\n};","map":{"version":3,"names":["React","QUICK_SEARCH_TIMEOUT","getNextQuickSearch","useQuickSearch","props","onChange","open","disabled","search","setSearch","useState","timer","setTimer","handleTimer","useCallback","nextSearch","clearTimeout","nextTimer","window","setTimeout","handleSearch","e","stopPropagation","key","useEffect","document","addEventListener","removeEventListener"],"sources":["/Users/ilaulanov/Documents/SynopsisYard/SYfood/client/node_modules/@gravity-ui/uikit/build/esm/components/Select/hooks/useQuickSearch.js"],"sourcesContent":["import React from 'react';\nimport { QUICK_SEARCH_TIMEOUT } from '../constants';\nimport { getNextQuickSearch } from '../utils';\nexport const useQuickSearch = (props) => {\n    const { onChange, open, disabled } = props;\n    const [search, setSearch] = React.useState('');\n    const [timer, setTimer] = React.useState();\n    const handleTimer = React.useCallback((nextSearch) => {\n        clearTimeout(timer);\n        if (nextSearch) {\n            const nextTimer = window.setTimeout(() => setSearch(''), QUICK_SEARCH_TIMEOUT);\n            setTimer(nextTimer);\n        }\n    }, [timer]);\n    const handleSearch = React.useCallback((e) => {\n        e.stopPropagation();\n        const nextSearch = getNextQuickSearch(e.key, search);\n        if (search !== nextSearch) {\n            handleTimer(nextSearch);\n            setSearch(nextSearch);\n        }\n    }, [handleTimer, search]);\n    React.useEffect(() => {\n        if (open && !disabled) {\n            document.addEventListener('keydown', handleSearch);\n        }\n        else if (!open && !disabled) {\n            setSearch('');\n        }\n        return () => {\n            if (open && !disabled) {\n                document.removeEventListener('keydown', handleSearch);\n            }\n        };\n    }, [handleSearch, open, disabled]);\n    React.useEffect(() => {\n        if (!open) {\n            clearTimeout(timer);\n        }\n        return () => clearTimeout(timer);\n    }, [open, timer]);\n    React.useEffect(() => {\n        onChange(search);\n    }, [onChange, search]);\n};\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,oBAAoB,QAAQ,cAAc;AACnD,SAASC,kBAAkB,QAAQ,UAAU;AAC7C,OAAO,MAAMC,cAAc,GAAIC,KAAK,IAAK;EACrC,MAAM;IAAEC,QAAQ;IAAEC,IAAI;IAAEC;EAAS,CAAC,GAAGH,KAAK;EAC1C,MAAM,CAACI,MAAM,EAAEC,SAAS,CAAC,GAAGT,KAAK,CAACU,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGZ,KAAK,CAACU,QAAQ,CAAC,CAAC;EAC1C,MAAMG,WAAW,GAAGb,KAAK,CAACc,WAAW,CAAEC,UAAU,IAAK;IAClDC,YAAY,CAACL,KAAK,CAAC;IACnB,IAAII,UAAU,EAAE;MACZ,MAAME,SAAS,GAAGC,MAAM,CAACC,UAAU,CAAC,MAAMV,SAAS,CAAC,EAAE,CAAC,EAAER,oBAAoB,CAAC;MAC9EW,QAAQ,CAACK,SAAS,CAAC;IACvB;EACJ,CAAC,EAAE,CAACN,KAAK,CAAC,CAAC;EACX,MAAMS,YAAY,GAAGpB,KAAK,CAACc,WAAW,CAAEO,CAAC,IAAK;IAC1CA,CAAC,CAACC,eAAe,CAAC,CAAC;IACnB,MAAMP,UAAU,GAAGb,kBAAkB,CAACmB,CAAC,CAACE,GAAG,EAAEf,MAAM,CAAC;IACpD,IAAIA,MAAM,KAAKO,UAAU,EAAE;MACvBF,WAAW,CAACE,UAAU,CAAC;MACvBN,SAAS,CAACM,UAAU,CAAC;IACzB;EACJ,CAAC,EAAE,CAACF,WAAW,EAAEL,MAAM,CAAC,CAAC;EACzBR,KAAK,CAACwB,SAAS,CAAC,MAAM;IAClB,IAAIlB,IAAI,IAAI,CAACC,QAAQ,EAAE;MACnBkB,QAAQ,CAACC,gBAAgB,CAAC,SAAS,EAAEN,YAAY,CAAC;IACtD,CAAC,MACI,IAAI,CAACd,IAAI,IAAI,CAACC,QAAQ,EAAE;MACzBE,SAAS,CAAC,EAAE,CAAC;IACjB;IACA,OAAO,MAAM;MACT,IAAIH,IAAI,IAAI,CAACC,QAAQ,EAAE;QACnBkB,QAAQ,CAACE,mBAAmB,CAAC,SAAS,EAAEP,YAAY,CAAC;MACzD;IACJ,CAAC;EACL,CAAC,EAAE,CAACA,YAAY,EAAEd,IAAI,EAAEC,QAAQ,CAAC,CAAC;EAClCP,KAAK,CAACwB,SAAS,CAAC,MAAM;IAClB,IAAI,CAAClB,IAAI,EAAE;MACPU,YAAY,CAACL,KAAK,CAAC;IACvB;IACA,OAAO,MAAMK,YAAY,CAACL,KAAK,CAAC;EACpC,CAAC,EAAE,CAACL,IAAI,EAAEK,KAAK,CAAC,CAAC;EACjBX,KAAK,CAACwB,SAAS,CAAC,MAAM;IAClBnB,QAAQ,CAACG,MAAM,CAAC;EACpB,CAAC,EAAE,CAACH,QAAQ,EAAEG,MAAM,CAAC,CAAC;AAC1B,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}