{"ast":null,"code":"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetContentContainer } from './SheetContent';\nimport { sheetBlock } from './constants';\nimport './Sheet.css';\nexport class Sheet extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.bodyScrollLocked = false;\n    this.state = {\n      visible: false\n    };\n    this.showSheet = () => {\n      this.lockBodyScroll();\n      this.setState({\n        visible: true\n      });\n    };\n    this.hideSheet = () => {\n      this.restoreBodyScroll();\n      if (this.props.onClose) {\n        this.props.onClose();\n      }\n      this.setState({\n        visible: false\n      });\n    };\n  }\n  static lockBodyScroll() {\n    if (++Sheet.bodyScrollLocksCount === 1) {\n      Sheet.bodyInitialOverflow = document.body.style.overflow;\n      document.body.style.overflow = 'hidden';\n    }\n  }\n  static restoreBodyScroll() {\n    if (Sheet.bodyScrollLocksCount === 0) {\n      return;\n    }\n    if (--Sheet.bodyScrollLocksCount === 0) {\n      document.body.style.overflow = Sheet.bodyInitialOverflow || '';\n      Sheet.bodyInitialOverflow = undefined;\n    }\n  }\n  componentDidMount() {\n    if (this.props.visible) {\n      this.showSheet();\n    }\n  }\n  componentDidUpdate(prevProps) {\n    if (!prevProps.visible && this.props.visible) {\n      this.showSheet();\n    }\n  }\n  componentWillUnmount() {\n    this.restoreBodyScroll();\n  }\n  render() {\n    if (!this.state.visible) {\n      return null;\n    }\n    return ReactDOM.createPortal(this.renderSheet(), document.body);\n  }\n  restoreBodyScroll() {\n    if (!this.bodyScrollLocked) {\n      return;\n    }\n    Sheet.restoreBodyScroll();\n    this.bodyScrollLocked = false;\n  }\n  lockBodyScroll() {\n    Sheet.lockBodyScroll();\n    this.bodyScrollLocked = true;\n  }\n  renderSheet() {\n    const {\n      id,\n      children,\n      className,\n      contentClassName,\n      swipeAreaClassName,\n      title,\n      visible,\n      allowHideOnContentScroll,\n      hideTopBar,\n      qa\n    } = this.props;\n    return React.createElement(\"div\", {\n      \"data-qa\": qa,\n      className: sheetBlock(null, className)\n    }, React.createElement(SheetContentContainer, {\n      id: id,\n      content: children,\n      contentClassName: contentClassName,\n      swipeAreaClassName: swipeAreaClassName,\n      title: title,\n      visible: visible,\n      allowHideOnContentScroll: allowHideOnContentScroll,\n      hideTopBar: hideTopBar,\n      hideSheet: this.hideSheet\n    }));\n  }\n}\nSheet.bodyScrollLocksCount = 0;\nSheet.bodyInitialOverflow = undefined;","map":{"version":3,"names":["React","ReactDOM","SheetContentContainer","sheetBlock","Sheet","Component","constructor","arguments","bodyScrollLocked","state","visible","showSheet","lockBodyScroll","setState","hideSheet","restoreBodyScroll","props","onClose","bodyScrollLocksCount","bodyInitialOverflow","document","body","style","overflow","undefined","componentDidMount","componentDidUpdate","prevProps","componentWillUnmount","render","createPortal","renderSheet","id","children","className","contentClassName","swipeAreaClassName","title","allowHideOnContentScroll","hideTopBar","qa","createElement","content"],"sources":["/Users/ilaulanov/node_modules/@gravity-ui/uikit/build/esm/components/Sheet/Sheet.js"],"sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetContentContainer } from './SheetContent';\nimport { sheetBlock } from './constants';\nimport './Sheet.css';\nexport class Sheet extends React.Component {\n    constructor() {\n        super(...arguments);\n        this.bodyScrollLocked = false;\n        this.state = {\n            visible: false,\n        };\n        this.showSheet = () => {\n            this.lockBodyScroll();\n            this.setState({ visible: true });\n        };\n        this.hideSheet = () => {\n            this.restoreBodyScroll();\n            if (this.props.onClose) {\n                this.props.onClose();\n            }\n            this.setState({ visible: false });\n        };\n    }\n    static lockBodyScroll() {\n        if (++Sheet.bodyScrollLocksCount === 1) {\n            Sheet.bodyInitialOverflow = document.body.style.overflow;\n            document.body.style.overflow = 'hidden';\n        }\n    }\n    static restoreBodyScroll() {\n        if (Sheet.bodyScrollLocksCount === 0) {\n            return;\n        }\n        if (--Sheet.bodyScrollLocksCount === 0) {\n            document.body.style.overflow = Sheet.bodyInitialOverflow || '';\n            Sheet.bodyInitialOverflow = undefined;\n        }\n    }\n    componentDidMount() {\n        if (this.props.visible) {\n            this.showSheet();\n        }\n    }\n    componentDidUpdate(prevProps) {\n        if (!prevProps.visible && this.props.visible) {\n            this.showSheet();\n        }\n    }\n    componentWillUnmount() {\n        this.restoreBodyScroll();\n    }\n    render() {\n        if (!this.state.visible) {\n            return null;\n        }\n        return ReactDOM.createPortal(this.renderSheet(), document.body);\n    }\n    restoreBodyScroll() {\n        if (!this.bodyScrollLocked) {\n            return;\n        }\n        Sheet.restoreBodyScroll();\n        this.bodyScrollLocked = false;\n    }\n    lockBodyScroll() {\n        Sheet.lockBodyScroll();\n        this.bodyScrollLocked = true;\n    }\n    renderSheet() {\n        const { id, children, className, contentClassName, swipeAreaClassName, title, visible, allowHideOnContentScroll, hideTopBar, qa, } = this.props;\n        return (React.createElement(\"div\", { \"data-qa\": qa, className: sheetBlock(null, className) },\n            React.createElement(SheetContentContainer, { id: id, content: children, contentClassName: contentClassName, swipeAreaClassName: swipeAreaClassName, title: title, visible: visible, allowHideOnContentScroll: allowHideOnContentScroll, hideTopBar: hideTopBar, hideSheet: this.hideSheet })));\n    }\n}\nSheet.bodyScrollLocksCount = 0;\nSheet.bodyInitialOverflow = undefined;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}