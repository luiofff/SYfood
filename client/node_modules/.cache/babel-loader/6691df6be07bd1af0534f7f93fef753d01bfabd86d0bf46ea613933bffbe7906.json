{"ast":null,"code":"import React from 'react';\nimport isEqual from 'lodash/isEqual';\nimport isObject from 'lodash/isObject';\nimport { DragDropContext, Draggable, Droppable } from 'react-beautiful-dnd';\nimport AutoSizer from 'react-virtualized-auto-sizer';\nimport { VariableSizeList as ListContainer } from 'react-window';\nimport { SelectLoadingIndicator } from '../Select/components/SelectList/SelectLoadingIndicator';\nimport { TextInput } from '../controls';\nimport { MobileContext } from '../mobile';\nimport { block } from '../utils/cn';\nimport { getUniqId } from '../utils/common';\nimport { ListItem, SimpleContainer, defaultRenderItem } from './components';\nimport { listNavigationIgnoredKeys } from './constants';\nimport './List.css';\nconst b = block('list');\nconst DEFAULT_ITEM_HEIGHT = 28;\nexport const listDefaultProps = {\n  items: [],\n  itemClassName: '',\n  filterable: true,\n  sortable: false,\n  virtualized: true,\n  deactivateOnLeave: true\n};\nconst reorder = (list, startIndex, endIndex) => {\n  const result = Array.from(list);\n  const [removed] = result.splice(startIndex, 1);\n  result.splice(endIndex, 0, removed);\n  return result;\n};\nexport class List extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      items: this.props.items,\n      filter: ''\n    };\n    this.refFilter = React.createRef();\n    this.refContainer = React.createRef();\n    this.blurTimer = null;\n    this.loadingItem = {\n      value: '__LIST_ITEM_LOADING__',\n      disabled: true\n    };\n    this.uniqId = getUniqId();\n    this.onKeyDown = event => {\n      const {\n        activeItem,\n        pageSize\n      } = this.state;\n      if (listNavigationIgnoredKeys.includes(event.key)) {\n        return;\n      }\n      switch (event.key) {\n        case 'ArrowDown':\n          {\n            this.handleKeyMove(event, 1, -1);\n            break;\n          }\n        case 'ArrowUp':\n          {\n            this.handleKeyMove(event, -1);\n            break;\n          }\n        case 'PageDown':\n          {\n            this.handleKeyMove(event, pageSize);\n            break;\n          }\n        case 'PageUp':\n          {\n            this.handleKeyMove(event, -pageSize);\n            break;\n          }\n        case 'Home':\n          {\n            this.handleKeyMove(event, this.state.items.length - (activeItem || 0));\n            break;\n          }\n        case 'End':\n          {\n            this.handleKeyMove(event, -(activeItem || 0) - 1);\n            break;\n          }\n        case 'Enter':\n          {\n            if (typeof activeItem === 'number' && this.props.onItemClick) {\n              this.props.onItemClick(this.state.items[activeItem], activeItem, true);\n            }\n            break;\n          }\n        default:\n          {\n            if (this.refFilter.current) {\n              this.refFilter.current.focus();\n            }\n          }\n      }\n    };\n    this.renderItemContent = (item, isItemActive, itemIndex) => {\n      const {\n        onLoadMore\n      } = this.props;\n      if (isObject(item) && 'value' in item && item.value === this.loadingItem.value) {\n        return React.createElement(SelectLoadingIndicator, {\n          onIntersect: itemIndex === 0 ? undefined : onLoadMore\n        });\n      }\n      return this.props.renderItem ? this.props.renderItem(item, isItemActive, itemIndex) : defaultRenderItem(item);\n    };\n    this.renderItem = _ref => {\n      let {\n        index,\n        style,\n        provided,\n        isDragging\n      } = _ref;\n      var _a;\n      const {\n        sortHandleAlign,\n        role\n      } = this.props;\n      const {\n        items,\n        activeItem\n      } = this.state;\n      const item = this.getItemsWithLoading()[index];\n      const sortable = this.props.sortable && items.length > 1 && !this.getFilter();\n      const active = index === activeItem || index === this.props.activeItemIndex;\n      const selected = Array.isArray(this.props.selectedItemIndex) ? this.props.selectedItemIndex.includes(index) : index === this.props.selectedItemIndex;\n      return React.createElement(ListItem, {\n        key: index,\n        style: style,\n        itemIndex: index,\n        item: item,\n        sortable: sortable,\n        sortHandleAlign: sortHandleAlign,\n        renderItem: this.renderItemContent,\n        itemClassName: this.props.itemClassName,\n        active: active,\n        selected: selected,\n        onActivate: this.onItemActivate,\n        onClick: this.props.onItemClick,\n        role: role === 'listbox' ? 'option' : 'listitem',\n        listId: (_a = this.props.id) !== null && _a !== void 0 ? _a : this.uniqId,\n        provided: provided,\n        isDragging: isDragging\n      });\n    };\n    this.renderVirtualizedItem = _ref2 => {\n      let {\n        index,\n        style\n      } = _ref2;\n      return React.createElement(Draggable, {\n        draggableId: String(index),\n        index: index,\n        key: \"item-key-\".concat(index)\n      }, provided => this.renderItem({\n        index,\n        style,\n        provided\n      }));\n    };\n    this.filterItem = filter => item => {\n      return String(item).includes(filter);\n    };\n    this.scrollToIndex = index => {\n      const container = this.refContainer.current;\n      if (container) {\n        container.scrollToItem(index);\n      }\n    };\n    this.deactivate = () => {\n      if (!this.blurTimer) {\n        return;\n      }\n      if (this.props.deactivateOnLeave) {\n        this.setState({\n          activeItem: undefined\n        });\n      }\n    };\n    this.handleFocus = () => {\n      if (this.blurTimer) {\n        clearTimeout(this.blurTimer);\n        this.blurTimer = null;\n      }\n    };\n    this.handleBlur = () => {\n      if (!this.blurTimer) {\n        this.blurTimer = setTimeout(this.deactivate, 50);\n      }\n    };\n    this.onUpdateFilterInternal = value => {\n      const {\n        items,\n        filterItem = this.filterItem,\n        onFilterEnd\n      } = this.props;\n      this.setState({\n        filter: value,\n        items: value ? items.filter(filterItem(value)) : items\n      }, () => {\n        if (onFilterEnd) {\n          onFilterEnd({\n            items: this.state.items\n          });\n        }\n      });\n    };\n    this.onFilterUpdate = value => {\n      if (this.props.onFilterUpdate) {\n        this.props.onFilterUpdate(value);\n      } else {\n        this.onUpdateFilterInternal(value);\n      }\n    };\n    this.onItemsRendered = _ref3 => {\n      let {\n        visibleStartIndex,\n        visibleStopIndex\n      } = _ref3;\n      this.setState({\n        pageSize: visibleStopIndex - visibleStartIndex\n      });\n    };\n    this.onItemActivate = index => {\n      if (!this.state.sorting) {\n        this.activateItem(index, false);\n      }\n    };\n    this.onMouseLeave = () => {\n      this.deactivate();\n    };\n    this.onSortStart = () => {\n      this.setState({\n        sorting: true\n      });\n    };\n    this.onSortEnd = result => {\n      if (!result.destination) {\n        return;\n      }\n      if (result.source.index === result.destination.index) {\n        return;\n      }\n      const oldIndex = result.source.index;\n      const newIndex = result.destination.index;\n      if (this.props.onSortEnd) {\n        this.props.onSortEnd({\n          oldIndex,\n          newIndex\n        });\n      }\n      const nextItems = reorder(this.getItems(), oldIndex, newIndex);\n      this.setState({\n        activeItem: newIndex,\n        items: nextItems,\n        sorting: false\n      });\n    };\n    this.getItemHeight = index => {\n      const {\n        itemHeight\n      } = this.props;\n      if (typeof itemHeight === 'function') {\n        const {\n          items\n        } = this.state;\n        return itemHeight(items[index], index);\n      }\n      return itemHeight;\n    };\n    this.getVirtualizedItemHeight = index => {\n      return this.getItemHeight(index) || DEFAULT_ITEM_HEIGHT;\n    };\n  }\n  static moveListElement(list, oldIndex, newIndex) {\n    if (oldIndex !== newIndex) {\n      const [item] = list.splice(oldIndex, 1);\n      list.splice(newIndex, 0, item);\n    }\n    return list;\n  }\n  static findNextIndex(list, index, step) {\n    const dataLength = list.length;\n    let currentIndex = (index + dataLength) % dataLength;\n    for (let i = 0; i < dataLength; i += 1) {\n      if (list[currentIndex] && !list[currentIndex].disabled) {\n        return currentIndex;\n      }\n      currentIndex = (currentIndex + dataLength + step) % dataLength;\n    }\n    return undefined;\n  }\n  componentDidUpdate(prevProps, prevState) {\n    if (!isEqual(this.props.items, prevProps.items)) {\n      const filter = this.getFilter();\n      const internalFiltering = filter && !this.props.onFilterUpdate;\n      if (internalFiltering) {\n        this.onUpdateFilterInternal(filter);\n      } else {\n        this.setState({\n          items: this.props.items\n        });\n      }\n    }\n    if (this.props.activeItemIndex !== prevProps.activeItemIndex) {\n      this.activateItem(this.props.activeItemIndex);\n    }\n    if (this.props.onChangeActive && this.state.activeItem !== prevState.activeItem) {\n      this.props.onChangeActive(this.state.activeItem);\n    }\n  }\n  componentWillUnmount() {\n    this.blurTimer = null;\n  }\n  render() {\n    const {\n      emptyPlaceholder,\n      virtualized,\n      className,\n      itemsClassName,\n      qa,\n      role = 'list'\n    } = this.props;\n    const {\n      items\n    } = this.state;\n    return React.createElement(MobileContext.Consumer, null, _ref4 => {\n      let {\n        mobile\n      } = _ref4;\n      return (\n        // The event handler should only be used to capture bubbled events\n        // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n        React.createElement(\"div\", {\n          className: b({\n            mobile\n          }, className),\n          \"data-qa\": qa,\n          tabIndex: -1,\n          onFocus: this.handleFocus,\n          onBlur: this.handleBlur,\n          onKeyDown: this.onKeyDown\n        }, this.renderFilter(), React.createElement(\"div\", {\n          className: b('items', {\n            virtualized\n          }, itemsClassName),\n          style: this.getItemsStyle(),\n          onMouseLeave: this.onMouseLeave,\n          role: role\n        }, this.renderItems(), items.length === 0 && Boolean(emptyPlaceholder) && React.createElement(\"div\", {\n          className: b('empty-placeholder')\n        }, emptyPlaceholder)))\n      );\n    });\n  }\n  getItems() {\n    return this.state.items;\n  }\n  getItemsWithLoading() {\n    if (this.props.sortable) {\n      return this.getItems();\n    }\n    return this.props.loading ? [...this.state.items, this.loadingItem] : this.getItems();\n  }\n  getActiveItem() {\n    return typeof this.state.activeItem === 'number' ? this.state.activeItem : null;\n  }\n  activateItem(index) {\n    let scrollTo = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    if (typeof index === 'number' && scrollTo) {\n      this.scrollToIndex(index);\n    }\n    this.setState({\n      activeItem: index\n    });\n  }\n  renderFilter() {\n    const {\n      size,\n      filterable,\n      filter = this.state.filter,\n      filterPlaceholder,\n      filterClassName = '',\n      autoFocus\n    } = this.props;\n    if (!filterable) {\n      return null;\n    }\n    return React.createElement(\"div\", {\n      className: b('filter', filterClassName)\n    }, React.createElement(TextInput, {\n      controlRef: this.refFilter,\n      size: size,\n      placeholder: filterPlaceholder,\n      value: filter,\n      hasClear: true,\n      onUpdate: this.onFilterUpdate,\n      autoFocus: autoFocus\n    }));\n  }\n  renderSimpleContainer() {\n    const {\n      sortable\n    } = this.props;\n    const items = this.getItemsWithLoading();\n    if (sortable) {\n      return React.createElement(DragDropContext, {\n        onDragStart: this.onSortStart,\n        onDragEnd: this.onSortEnd\n      }, React.createElement(Droppable, {\n        droppableId: \"droppable\",\n        renderClone: (provided, snapshot, rubric) => {\n          return this.renderItem({\n            index: rubric.source.index,\n            provided,\n            isDragging: snapshot.isDragging\n          });\n        }\n      }, droppableProvided => React.createElement(SimpleContainer, {\n        ref: this.refContainer,\n        itemCount: items.length,\n        provided: droppableProvided,\n        sortable: sortable\n      }, items.map((_item, index) => {\n        return React.createElement(Draggable, {\n          draggableId: String(index),\n          index: index,\n          key: \"item-key-\".concat(index)\n        }, (provided, snapshot) => {\n          return this.renderItem({\n            index,\n            isDragging: snapshot.isDragging,\n            provided,\n            style: {\n              height: this.getItemHeight(index)\n            }\n          });\n        });\n      }))));\n    }\n    return React.createElement(SimpleContainer, {\n      itemCount: items.length,\n      ref: this.refContainer\n    }, items.map((_item, index) => this.renderItem({\n      index,\n      style: {\n        height: this.getItemHeight(index)\n      }\n    })));\n  }\n  renderVirtualizedContainer() {\n    const items = this.getItems();\n    if (this.props.sortable) {\n      return React.createElement(DragDropContext, {\n        onDragStart: this.onSortStart,\n        onDragEnd: this.onSortEnd\n      }, React.createElement(Droppable, {\n        droppableId: \"droppable\",\n        mode: \"virtual\",\n        renderClone: (provided, snapshot, rubric) => {\n          return this.renderItem({\n            index: rubric.source.index,\n            provided,\n            isDragging: snapshot.isDragging\n          });\n        }\n      }, droppableProvided => React.createElement(AutoSizer, null, _ref5 => {\n        let {\n          width,\n          height\n        } = _ref5;\n        return React.createElement(ListContainer, {\n          ref: this.refContainer,\n          outerRef: droppableProvided.innerRef,\n          width: width,\n          height: height,\n          itemSize: this.getVirtualizedItemHeight,\n          itemData: items,\n          itemCount: items.length,\n          overscanCount: 10,\n          onItemsRendered: this.onItemsRendered,\n          // this property used to rerender items in viewport\n          // must be last, typescript skips checks for all props behind ts-ignore/ts-expect-error\n          // @ts-expect-error\n          activeItem: this.state.activeItem\n        }, this.renderVirtualizedItem);\n      })));\n    }\n    return React.createElement(AutoSizer, null, _ref6 => {\n      let {\n        width,\n        height\n      } = _ref6;\n      return React.createElement(ListContainer, {\n        ref: this.refContainer,\n        width: width,\n        height: height,\n        itemSize: this.getVirtualizedItemHeight,\n        itemData: items,\n        itemCount: items.length,\n        overscanCount: 10,\n        onItemsRendered: this.onItemsRendered,\n        // this property used to rerender items in viewport\n        // must be last, typescript skips checks for all props behind ts-ignore/ts-expect-error\n        // @ts-expect-error\n        activeItem: this.state.activeItem\n      }, this.renderItem);\n    });\n  }\n  renderItems() {\n    if (this.props.virtualized) {\n      return this.renderVirtualizedContainer();\n    } else {\n      return this.renderSimpleContainer();\n    }\n  }\n  getFilter() {\n    const {\n      filter = this.state.filter\n    } = this.props;\n    return filter;\n  }\n  getItemsStyle() {\n    let {\n      itemsHeight\n    } = this.props;\n    if (typeof itemsHeight === 'function') {\n      itemsHeight = itemsHeight(this.state.items);\n    }\n    return itemsHeight ? {\n      height: itemsHeight\n    } : undefined;\n  }\n  handleKeyMove(event, step) {\n    let defaultItemIndex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    event.preventDefault();\n    const {\n      activeItem = defaultItemIndex\n    } = this.state;\n    this.activateItem(List.findNextIndex(this.state.items, activeItem + step, Math.sign(step)));\n  }\n}\nList.defaultProps = listDefaultProps;","map":{"version":3,"names":["React","isEqual","isObject","DragDropContext","Draggable","Droppable","AutoSizer","VariableSizeList","ListContainer","SelectLoadingIndicator","TextInput","MobileContext","block","getUniqId","ListItem","SimpleContainer","defaultRenderItem","listNavigationIgnoredKeys","b","DEFAULT_ITEM_HEIGHT","listDefaultProps","items","itemClassName","filterable","sortable","virtualized","deactivateOnLeave","reorder","list","startIndex","endIndex","result","Array","from","removed","splice","List","Component","constructor","arguments","state","props","filter","refFilter","createRef","refContainer","blurTimer","loadingItem","value","disabled","uniqId","onKeyDown","event","activeItem","pageSize","includes","key","handleKeyMove","length","onItemClick","current","focus","renderItemContent","item","isItemActive","itemIndex","onLoadMore","createElement","onIntersect","undefined","renderItem","_ref","index","style","provided","isDragging","_a","sortHandleAlign","role","getItemsWithLoading","getFilter","active","activeItemIndex","selected","isArray","selectedItemIndex","onActivate","onItemActivate","onClick","listId","id","renderVirtualizedItem","_ref2","draggableId","String","concat","filterItem","scrollToIndex","container","scrollToItem","deactivate","setState","handleFocus","clearTimeout","handleBlur","setTimeout","onUpdateFilterInternal","onFilterEnd","onFilterUpdate","onItemsRendered","_ref3","visibleStartIndex","visibleStopIndex","sorting","activateItem","onMouseLeave","onSortStart","onSortEnd","destination","source","oldIndex","newIndex","nextItems","getItems","getItemHeight","itemHeight","getVirtualizedItemHeight","moveListElement","findNextIndex","step","dataLength","currentIndex","i","componentDidUpdate","prevProps","prevState","internalFiltering","onChangeActive","componentWillUnmount","render","emptyPlaceholder","className","itemsClassName","qa","Consumer","_ref4","mobile","tabIndex","onFocus","onBlur","renderFilter","getItemsStyle","renderItems","Boolean","loading","getActiveItem","scrollTo","size","filterPlaceholder","filterClassName","autoFocus","controlRef","placeholder","hasClear","onUpdate","renderSimpleContainer","onDragStart","onDragEnd","droppableId","renderClone","snapshot","rubric","droppableProvided","ref","itemCount","map","_item","height","renderVirtualizedContainer","mode","_ref5","width","outerRef","innerRef","itemSize","itemData","overscanCount","_ref6","itemsHeight","defaultItemIndex","preventDefault","Math","sign","defaultProps"],"sources":["/Users/ilaulanov/Documents/SynopsisYard/SYfood/client/node_modules/@gravity-ui/uikit/build/esm/components/List/List.js"],"sourcesContent":["import React from 'react';\nimport isEqual from 'lodash/isEqual';\nimport isObject from 'lodash/isObject';\nimport { DragDropContext, Draggable, Droppable, } from 'react-beautiful-dnd';\nimport AutoSizer from 'react-virtualized-auto-sizer';\nimport { VariableSizeList as ListContainer } from 'react-window';\nimport { SelectLoadingIndicator } from '../Select/components/SelectList/SelectLoadingIndicator';\nimport { TextInput } from '../controls';\nimport { MobileContext } from '../mobile';\nimport { block } from '../utils/cn';\nimport { getUniqId } from '../utils/common';\nimport { ListItem, SimpleContainer, defaultRenderItem } from './components';\nimport { listNavigationIgnoredKeys } from './constants';\nimport './List.css';\nconst b = block('list');\nconst DEFAULT_ITEM_HEIGHT = 28;\nexport const listDefaultProps = {\n    items: [],\n    itemClassName: '',\n    filterable: true,\n    sortable: false,\n    virtualized: true,\n    deactivateOnLeave: true,\n};\nconst reorder = (list, startIndex, endIndex) => {\n    const result = Array.from(list);\n    const [removed] = result.splice(startIndex, 1);\n    result.splice(endIndex, 0, removed);\n    return result;\n};\nexport class List extends React.Component {\n    constructor() {\n        super(...arguments);\n        this.state = {\n            items: this.props.items,\n            filter: '',\n        };\n        this.refFilter = React.createRef();\n        this.refContainer = React.createRef();\n        this.blurTimer = null;\n        this.loadingItem = { value: '__LIST_ITEM_LOADING__', disabled: true };\n        this.uniqId = getUniqId();\n        this.onKeyDown = (event) => {\n            const { activeItem, pageSize } = this.state;\n            if (listNavigationIgnoredKeys.includes(event.key)) {\n                return;\n            }\n            switch (event.key) {\n                case 'ArrowDown': {\n                    this.handleKeyMove(event, 1, -1);\n                    break;\n                }\n                case 'ArrowUp': {\n                    this.handleKeyMove(event, -1);\n                    break;\n                }\n                case 'PageDown': {\n                    this.handleKeyMove(event, pageSize);\n                    break;\n                }\n                case 'PageUp': {\n                    this.handleKeyMove(event, -pageSize);\n                    break;\n                }\n                case 'Home': {\n                    this.handleKeyMove(event, this.state.items.length - (activeItem || 0));\n                    break;\n                }\n                case 'End': {\n                    this.handleKeyMove(event, -(activeItem || 0) - 1);\n                    break;\n                }\n                case 'Enter': {\n                    if (typeof activeItem === 'number' && this.props.onItemClick) {\n                        this.props.onItemClick(this.state.items[activeItem], activeItem, true);\n                    }\n                    break;\n                }\n                default: {\n                    if (this.refFilter.current) {\n                        this.refFilter.current.focus();\n                    }\n                }\n            }\n        };\n        this.renderItemContent = (item, isItemActive, itemIndex) => {\n            const { onLoadMore } = this.props;\n            if (isObject(item) && 'value' in item && item.value === this.loadingItem.value) {\n                return (React.createElement(SelectLoadingIndicator, { onIntersect: itemIndex === 0 ? undefined : onLoadMore }));\n            }\n            return this.props.renderItem\n                ? this.props.renderItem(item, isItemActive, itemIndex)\n                : defaultRenderItem(item);\n        };\n        this.renderItem = ({ index, style, provided, isDragging, }) => {\n            var _a;\n            const { sortHandleAlign, role } = this.props;\n            const { items, activeItem } = this.state;\n            const item = this.getItemsWithLoading()[index];\n            const sortable = this.props.sortable && items.length > 1 && !this.getFilter();\n            const active = index === activeItem || index === this.props.activeItemIndex;\n            const selected = Array.isArray(this.props.selectedItemIndex)\n                ? this.props.selectedItemIndex.includes(index)\n                : index === this.props.selectedItemIndex;\n            return (React.createElement(ListItem, { key: index, style: style, itemIndex: index, item: item, sortable: sortable, sortHandleAlign: sortHandleAlign, renderItem: this.renderItemContent, itemClassName: this.props.itemClassName, active: active, selected: selected, onActivate: this.onItemActivate, onClick: this.props.onItemClick, role: role === 'listbox' ? 'option' : 'listitem', listId: (_a = this.props.id) !== null && _a !== void 0 ? _a : this.uniqId, provided: provided, isDragging: isDragging }));\n        };\n        this.renderVirtualizedItem = ({ index, style, }) => {\n            return (React.createElement(Draggable, { draggableId: String(index), index: index, key: `item-key-${index}` }, (provided) => this.renderItem({ index, style, provided })));\n        };\n        this.filterItem = (filter) => (item) => {\n            return String(item).includes(filter);\n        };\n        this.scrollToIndex = (index) => {\n            const container = this.refContainer.current;\n            if (container) {\n                container.scrollToItem(index);\n            }\n        };\n        this.deactivate = () => {\n            if (!this.blurTimer) {\n                return;\n            }\n            if (this.props.deactivateOnLeave) {\n                this.setState({ activeItem: undefined });\n            }\n        };\n        this.handleFocus = () => {\n            if (this.blurTimer) {\n                clearTimeout(this.blurTimer);\n                this.blurTimer = null;\n            }\n        };\n        this.handleBlur = () => {\n            if (!this.blurTimer) {\n                this.blurTimer = setTimeout(this.deactivate, 50);\n            }\n        };\n        this.onUpdateFilterInternal = (value) => {\n            const { items, filterItem = this.filterItem, onFilterEnd } = this.props;\n            this.setState({\n                filter: value,\n                items: value ? items.filter(filterItem(value)) : items,\n            }, () => {\n                if (onFilterEnd) {\n                    onFilterEnd({ items: this.state.items });\n                }\n            });\n        };\n        this.onFilterUpdate = (value) => {\n            if (this.props.onFilterUpdate) {\n                this.props.onFilterUpdate(value);\n            }\n            else {\n                this.onUpdateFilterInternal(value);\n            }\n        };\n        this.onItemsRendered = ({ visibleStartIndex, visibleStopIndex, }) => {\n            this.setState({\n                pageSize: visibleStopIndex - visibleStartIndex,\n            });\n        };\n        this.onItemActivate = (index) => {\n            if (!this.state.sorting) {\n                this.activateItem(index, false);\n            }\n        };\n        this.onMouseLeave = () => {\n            this.deactivate();\n        };\n        this.onSortStart = () => {\n            this.setState({ sorting: true });\n        };\n        this.onSortEnd = (result) => {\n            if (!result.destination) {\n                return;\n            }\n            if (result.source.index === result.destination.index) {\n                return;\n            }\n            const oldIndex = result.source.index;\n            const newIndex = result.destination.index;\n            if (this.props.onSortEnd) {\n                this.props.onSortEnd({ oldIndex, newIndex });\n            }\n            const nextItems = reorder(this.getItems(), oldIndex, newIndex);\n            this.setState({\n                activeItem: newIndex,\n                items: nextItems,\n                sorting: false,\n            });\n        };\n        this.getItemHeight = (index) => {\n            const { itemHeight } = this.props;\n            if (typeof itemHeight === 'function') {\n                const { items } = this.state;\n                return itemHeight(items[index], index);\n            }\n            return itemHeight;\n        };\n        this.getVirtualizedItemHeight = (index) => {\n            return this.getItemHeight(index) || DEFAULT_ITEM_HEIGHT;\n        };\n    }\n    static moveListElement(list, oldIndex, newIndex) {\n        if (oldIndex !== newIndex) {\n            const [item] = list.splice(oldIndex, 1);\n            list.splice(newIndex, 0, item);\n        }\n        return list;\n    }\n    static findNextIndex(list, index, step) {\n        const dataLength = list.length;\n        let currentIndex = (index + dataLength) % dataLength;\n        for (let i = 0; i < dataLength; i += 1) {\n            if (list[currentIndex] && !list[currentIndex].disabled) {\n                return currentIndex;\n            }\n            currentIndex = (currentIndex + dataLength + step) % dataLength;\n        }\n        return undefined;\n    }\n    componentDidUpdate(prevProps, prevState) {\n        if (!isEqual(this.props.items, prevProps.items)) {\n            const filter = this.getFilter();\n            const internalFiltering = filter && !this.props.onFilterUpdate;\n            if (internalFiltering) {\n                this.onUpdateFilterInternal(filter);\n            }\n            else {\n                this.setState({ items: this.props.items });\n            }\n        }\n        if (this.props.activeItemIndex !== prevProps.activeItemIndex) {\n            this.activateItem(this.props.activeItemIndex);\n        }\n        if (this.props.onChangeActive && this.state.activeItem !== prevState.activeItem) {\n            this.props.onChangeActive(this.state.activeItem);\n        }\n    }\n    componentWillUnmount() {\n        this.blurTimer = null;\n    }\n    render() {\n        const { emptyPlaceholder, virtualized, className, itemsClassName, qa, role = 'list', } = this.props;\n        const { items } = this.state;\n        return (React.createElement(MobileContext.Consumer, null, ({ mobile }) => (\n        // The event handler should only be used to capture bubbled events\n        // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n        React.createElement(\"div\", { className: b({ mobile }, className), \"data-qa\": qa, tabIndex: -1, onFocus: this.handleFocus, onBlur: this.handleBlur, onKeyDown: this.onKeyDown },\n            this.renderFilter(),\n            React.createElement(\"div\", { className: b('items', { virtualized }, itemsClassName), style: this.getItemsStyle(), onMouseLeave: this.onMouseLeave, role: role },\n                this.renderItems(),\n                items.length === 0 && Boolean(emptyPlaceholder) && (React.createElement(\"div\", { className: b('empty-placeholder') }, emptyPlaceholder)))))));\n    }\n    getItems() {\n        return this.state.items;\n    }\n    getItemsWithLoading() {\n        if (this.props.sortable) {\n            return this.getItems();\n        }\n        return this.props.loading ? [...this.state.items, this.loadingItem] : this.getItems();\n    }\n    getActiveItem() {\n        return typeof this.state.activeItem === 'number' ? this.state.activeItem : null;\n    }\n    activateItem(index, scrollTo = true) {\n        if (typeof index === 'number' && scrollTo) {\n            this.scrollToIndex(index);\n        }\n        this.setState({ activeItem: index });\n    }\n    renderFilter() {\n        const { size, filterable, filter = this.state.filter, filterPlaceholder, filterClassName = '', autoFocus, } = this.props;\n        if (!filterable) {\n            return null;\n        }\n        return (React.createElement(\"div\", { className: b('filter', filterClassName) },\n            React.createElement(TextInput, { controlRef: this.refFilter, size: size, placeholder: filterPlaceholder, value: filter, hasClear: true, onUpdate: this.onFilterUpdate, autoFocus: autoFocus })));\n    }\n    renderSimpleContainer() {\n        const { sortable } = this.props;\n        const items = this.getItemsWithLoading();\n        if (sortable) {\n            return (React.createElement(DragDropContext, { onDragStart: this.onSortStart, onDragEnd: this.onSortEnd },\n                React.createElement(Droppable, { droppableId: \"droppable\", renderClone: (provided, snapshot, rubric) => {\n                        return this.renderItem({\n                            index: rubric.source.index,\n                            provided,\n                            isDragging: snapshot.isDragging,\n                        });\n                    } }, (droppableProvided) => (React.createElement(SimpleContainer, { ref: this.refContainer, itemCount: items.length, provided: droppableProvided, sortable: sortable }, items.map((_item, index) => {\n                    return (React.createElement(Draggable, { draggableId: String(index), index: index, key: `item-key-${index}` }, (provided, snapshot) => {\n                        return this.renderItem({\n                            index,\n                            isDragging: snapshot.isDragging,\n                            provided,\n                            style: { height: this.getItemHeight(index) },\n                        });\n                    }));\n                }))))));\n        }\n        return (React.createElement(SimpleContainer, { itemCount: items.length, ref: this.refContainer }, items.map((_item, index) => this.renderItem({ index, style: { height: this.getItemHeight(index) } }))));\n    }\n    renderVirtualizedContainer() {\n        const items = this.getItems();\n        if (this.props.sortable) {\n            return (React.createElement(DragDropContext, { onDragStart: this.onSortStart, onDragEnd: this.onSortEnd },\n                React.createElement(Droppable, { droppableId: \"droppable\", mode: \"virtual\", renderClone: (provided, snapshot, rubric) => {\n                        return this.renderItem({\n                            index: rubric.source.index,\n                            provided,\n                            isDragging: snapshot.isDragging,\n                        });\n                    } }, (droppableProvided) => (React.createElement(AutoSizer, null, ({ width, height }) => (React.createElement(ListContainer, { ref: this.refContainer, outerRef: droppableProvided.innerRef, width: width, height: height, itemSize: this.getVirtualizedItemHeight, itemData: items, itemCount: items.length, overscanCount: 10, onItemsRendered: this.onItemsRendered, \n                    // this property used to rerender items in viewport\n                    // must be last, typescript skips checks for all props behind ts-ignore/ts-expect-error\n                    // @ts-expect-error\n                    activeItem: this.state.activeItem }, this.renderVirtualizedItem)))))));\n        }\n        return (React.createElement(AutoSizer, null, ({ width, height }) => (React.createElement(ListContainer, { ref: this.refContainer, width: width, height: height, itemSize: this.getVirtualizedItemHeight, itemData: items, itemCount: items.length, overscanCount: 10, onItemsRendered: this.onItemsRendered, \n            // this property used to rerender items in viewport\n            // must be last, typescript skips checks for all props behind ts-ignore/ts-expect-error\n            // @ts-expect-error\n            activeItem: this.state.activeItem }, this.renderItem))));\n    }\n    renderItems() {\n        if (this.props.virtualized) {\n            return this.renderVirtualizedContainer();\n        }\n        else {\n            return this.renderSimpleContainer();\n        }\n    }\n    getFilter() {\n        const { filter = this.state.filter } = this.props;\n        return filter;\n    }\n    getItemsStyle() {\n        let { itemsHeight } = this.props;\n        if (typeof itemsHeight === 'function') {\n            itemsHeight = itemsHeight(this.state.items);\n        }\n        return itemsHeight ? { height: itemsHeight } : undefined;\n    }\n    handleKeyMove(event, step, defaultItemIndex = 0) {\n        event.preventDefault();\n        const { activeItem = defaultItemIndex } = this.state;\n        this.activateItem(List.findNextIndex(this.state.items, activeItem + step, Math.sign(step)));\n    }\n}\nList.defaultProps = listDefaultProps;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}