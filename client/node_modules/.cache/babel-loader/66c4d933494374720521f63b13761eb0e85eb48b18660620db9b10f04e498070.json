{"ast":null,"code":"import React from 'react';\nimport { Xmark } from '@gravity-ui/icons';\nimport { Button } from '../Button';\nimport { Icon } from '../Icon';\nimport { Popup } from '../Popup';\nimport { cnPopover } from './Popover.classname';\nimport { Buttons } from './components/Buttons/Buttons';\nimport { Content } from './components/Content/Content';\nimport { Links } from './components/Links/Links';\nimport { Trigger } from './components/Trigger/Trigger';\nimport { PopoverBehavior } from './config';\nimport { useOpen } from './hooks/useOpen';\nimport './Popover.css';\nexport const Popover = React.forwardRef(function ({\n  initialOpen = false,\n  disabled = false,\n  autoclosable = true,\n  openOnHover = true,\n  delayOpening,\n  delayClosing,\n  behavior = PopoverBehavior.Delayed,\n  placement = ['right', 'bottom'],\n  offset = {},\n  tooltipOffset,\n  tooltipClassName,\n  tooltipContentClassName,\n  theme = 'info',\n  size = 's',\n  hasArrow = true,\n  hasClose = false,\n  className,\n  children,\n  title,\n  content,\n  htmlContent,\n  contentClassName,\n  links,\n  forceLinksAppearance = false,\n  tooltipActionButton,\n  tooltipCancelButton,\n  onOpenChange,\n  onCloseClick,\n  onClick,\n  anchorRef,\n  strategy,\n  qa,\n  disablePortal = false,\n  tooltipId,\n  focusTrap,\n  autoFocus,\n  restoreFocusRef,\n  modifiers\n}, ref) {\n  const controlRef = React.useRef(null);\n  const closedManually = React.useRef(false);\n  const shouldBeOpen = React.useRef(initialOpen);\n  const {\n    isOpen,\n    closingTimeout,\n    openTooltip,\n    openTooltipDelayed,\n    unsetOpeningTimeout,\n    closeTooltip,\n    closeTooltipDelayed,\n    unsetClosingTimeout\n  } = useOpen({\n    initialOpen,\n    disabled,\n    autoclosable,\n    onOpenChange,\n    delayOpening,\n    delayClosing,\n    behavior,\n    shouldBeOpen\n  });\n  React.useImperativeHandle(ref, () => ({\n    openTooltip,\n    closeTooltip\n  }), [openTooltip, closeTooltip]);\n  const handleCloseClick = async event => {\n    closeTooltip();\n    onCloseClick === null || onCloseClick === void 0 ? void 0 : onCloseClick(event);\n  };\n  const hasTitle = Boolean(title);\n  const tooltip = React.createElement(Popup, {\n    id: tooltipId,\n    role: openOnHover ? 'tooltip' : 'dialog',\n    strategy: strategy,\n    anchorRef: anchorRef || controlRef,\n    className: cnPopover('tooltip', {\n      theme,\n      size,\n      ['with-close']: hasClose,\n      'force-links-appearance': forceLinksAppearance\n    }, tooltipClassName),\n    contentClassName: cnPopover('tooltip-popup-content', tooltipContentClassName),\n    open: isOpen,\n    placement: placement,\n    hasArrow: hasArrow,\n    offset: tooltipOffset,\n    onClose: anchorRef ? undefined : closeTooltip,\n    qa: qa ? `${qa}-tooltip` : '',\n    disablePortal: disablePortal,\n    focusTrap: focusTrap,\n    // eslint-disable-next-line jsx-a11y/no-autofocus\n    autoFocus: autoFocus,\n    restoreFocus: true,\n    restoreFocusRef: restoreFocusRef || controlRef,\n    modifiers: modifiers\n  }, React.createElement(React.Fragment, null, title && React.createElement(\"h3\", {\n    className: cnPopover('tooltip-title')\n  }, title), React.createElement(Content, {\n    secondary: hasTitle ? theme !== 'announcement' : false,\n    content: content,\n    htmlContent: htmlContent,\n    className: contentClassName\n  }), links && React.createElement(Links, {\n    links: links\n  }), React.createElement(Buttons, {\n    theme: theme,\n    tooltipActionButton: tooltipActionButton,\n    tooltipCancelButton: tooltipCancelButton\n  }), hasClose && React.createElement(\"div\", {\n    className: cnPopover('tooltip-close')\n  }, React.createElement(Button, {\n    size: \"s\",\n    view: \"flat-secondary\",\n    onClick: handleCloseClick,\n    extraProps: {\n      'aria-label': 'Close'\n    }\n  }, React.createElement(Icon, {\n    data: Xmark,\n    size: 16\n  })))));\n  if (anchorRef) {\n    return tooltip;\n  }\n  const onMouseEnter = () => {\n    unsetClosingTimeout();\n    if (!isOpen && !disabled && !closedManually.current) {\n      openTooltipDelayed();\n    } else {\n      shouldBeOpen.current = true;\n    }\n  };\n  const onMouseLeave = () => {\n    if (autoclosable && !closedManually.current && !closingTimeout.current) {\n      unsetOpeningTimeout();\n      closeTooltipDelayed();\n    } else {\n      shouldBeOpen.current = false;\n    }\n    closedManually.current = false;\n  };\n  return React.createElement(\"div\", {\n    ref: controlRef,\n    className: cnPopover({\n      disabled\n    }, className),\n    onMouseEnter: openOnHover ? onMouseEnter : undefined,\n    onMouseLeave: openOnHover ? onMouseLeave : undefined,\n    onFocus: openOnHover ? onMouseEnter : undefined,\n    onBlur: openOnHover ? onMouseLeave : undefined,\n    style: {\n      top: offset.top,\n      left: offset.left\n    },\n    \"data-qa\": qa\n  }, React.createElement(Trigger, {\n    closeTooltip: closeTooltip,\n    openTooltip: openTooltip,\n    open: isOpen,\n    className: cnPopover('handler'),\n    disabled: disabled,\n    onClick: onClick,\n    closedManually: closedManually\n  }, children), tooltip);\n});\nPopover.displayName = 'Popover';","map":{"version":3,"names":["React","Xmark","Button","Icon","Popup","cnPopover","Buttons","Content","Links","Trigger","PopoverBehavior","useOpen","Popover","forwardRef","initialOpen","disabled","autoclosable","openOnHover","delayOpening","delayClosing","behavior","Delayed","placement","offset","tooltipOffset","tooltipClassName","tooltipContentClassName","theme","size","hasArrow","hasClose","className","children","title","content","htmlContent","contentClassName","links","forceLinksAppearance","tooltipActionButton","tooltipCancelButton","onOpenChange","onCloseClick","onClick","anchorRef","strategy","qa","disablePortal","tooltipId","focusTrap","autoFocus","restoreFocusRef","modifiers","ref","controlRef","useRef","closedManually","shouldBeOpen","isOpen","closingTimeout","openTooltip","openTooltipDelayed","unsetOpeningTimeout","closeTooltip","closeTooltipDelayed","unsetClosingTimeout","useImperativeHandle","handleCloseClick","event","hasTitle","Boolean","tooltip","createElement","id","role","open","onClose","undefined","restoreFocus","Fragment","secondary","view","extraProps","data","onMouseEnter","current","onMouseLeave","onFocus","onBlur","style","top","left","displayName"],"sources":["/Users/ilaulanov/node_modules/@gravity-ui/uikit/build/esm/components/Popover/Popover.js"],"sourcesContent":["import React from 'react';\nimport { Xmark } from '@gravity-ui/icons';\nimport { Button } from '../Button';\nimport { Icon } from '../Icon';\nimport { Popup } from '../Popup';\nimport { cnPopover } from './Popover.classname';\nimport { Buttons } from './components/Buttons/Buttons';\nimport { Content } from './components/Content/Content';\nimport { Links } from './components/Links/Links';\nimport { Trigger } from './components/Trigger/Trigger';\nimport { PopoverBehavior } from './config';\nimport { useOpen } from './hooks/useOpen';\nimport './Popover.css';\nexport const Popover = React.forwardRef(function ({ initialOpen = false, disabled = false, autoclosable = true, openOnHover = true, delayOpening, delayClosing, behavior = PopoverBehavior.Delayed, placement = ['right', 'bottom'], offset = {}, tooltipOffset, tooltipClassName, tooltipContentClassName, theme = 'info', size = 's', hasArrow = true, hasClose = false, className, children, title, content, htmlContent, contentClassName, links, forceLinksAppearance = false, tooltipActionButton, tooltipCancelButton, onOpenChange, onCloseClick, onClick, anchorRef, strategy, qa, disablePortal = false, tooltipId, focusTrap, autoFocus, restoreFocusRef, modifiers, }, ref) {\n    const controlRef = React.useRef(null);\n    const closedManually = React.useRef(false);\n    const shouldBeOpen = React.useRef(initialOpen);\n    const { isOpen, closingTimeout, openTooltip, openTooltipDelayed, unsetOpeningTimeout, closeTooltip, closeTooltipDelayed, unsetClosingTimeout, } = useOpen({\n        initialOpen,\n        disabled,\n        autoclosable,\n        onOpenChange,\n        delayOpening,\n        delayClosing,\n        behavior,\n        shouldBeOpen,\n    });\n    React.useImperativeHandle(ref, () => ({\n        openTooltip,\n        closeTooltip,\n    }), [openTooltip, closeTooltip]);\n    const handleCloseClick = async (event) => {\n        closeTooltip();\n        onCloseClick === null || onCloseClick === void 0 ? void 0 : onCloseClick(event);\n    };\n    const hasTitle = Boolean(title);\n    const tooltip = (React.createElement(Popup, { id: tooltipId, role: openOnHover ? 'tooltip' : 'dialog', strategy: strategy, anchorRef: anchorRef || controlRef, className: cnPopover('tooltip', {\n            theme,\n            size,\n            ['with-close']: hasClose,\n            'force-links-appearance': forceLinksAppearance,\n        }, tooltipClassName), contentClassName: cnPopover('tooltip-popup-content', tooltipContentClassName), open: isOpen, placement: placement, hasArrow: hasArrow, offset: tooltipOffset, onClose: anchorRef ? undefined : closeTooltip, qa: qa ? `${qa}-tooltip` : '', disablePortal: disablePortal, focusTrap: focusTrap, \n        // eslint-disable-next-line jsx-a11y/no-autofocus\n        autoFocus: autoFocus, restoreFocus: true, restoreFocusRef: restoreFocusRef || controlRef, modifiers: modifiers },\n        React.createElement(React.Fragment, null,\n            title && React.createElement(\"h3\", { className: cnPopover('tooltip-title') }, title),\n            React.createElement(Content, { secondary: hasTitle ? theme !== 'announcement' : false, content: content, htmlContent: htmlContent, className: contentClassName }),\n            links && React.createElement(Links, { links: links }),\n            React.createElement(Buttons, { theme: theme, tooltipActionButton: tooltipActionButton, tooltipCancelButton: tooltipCancelButton }),\n            hasClose && (React.createElement(\"div\", { className: cnPopover('tooltip-close') },\n                React.createElement(Button, { size: \"s\", view: \"flat-secondary\", onClick: handleCloseClick, extraProps: {\n                        'aria-label': 'Close',\n                    } },\n                    React.createElement(Icon, { data: Xmark, size: 16 })))))));\n    if (anchorRef) {\n        return tooltip;\n    }\n    const onMouseEnter = () => {\n        unsetClosingTimeout();\n        if (!isOpen && !disabled && !closedManually.current) {\n            openTooltipDelayed();\n        }\n        else {\n            shouldBeOpen.current = true;\n        }\n    };\n    const onMouseLeave = () => {\n        if (autoclosable && !closedManually.current && !closingTimeout.current) {\n            unsetOpeningTimeout();\n            closeTooltipDelayed();\n        }\n        else {\n            shouldBeOpen.current = false;\n        }\n        closedManually.current = false;\n    };\n    return (React.createElement(\"div\", { ref: controlRef, className: cnPopover({ disabled }, className), onMouseEnter: openOnHover ? onMouseEnter : undefined, onMouseLeave: openOnHover ? onMouseLeave : undefined, onFocus: openOnHover ? onMouseEnter : undefined, onBlur: openOnHover ? onMouseLeave : undefined, style: {\n            top: offset.top,\n            left: offset.left,\n        }, \"data-qa\": qa },\n        React.createElement(Trigger, { closeTooltip: closeTooltip, openTooltip: openTooltip, open: isOpen, className: cnPopover('handler'), disabled: disabled, onClick: onClick, closedManually: closedManually }, children),\n        tooltip));\n});\nPopover.displayName = 'Popover';\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}