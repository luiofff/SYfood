{"ast":null,"code":"import React from 'react';\nimport { useUpdateEffect } from '../../utils/useUpdateEffect';\nimport { delayByBehavior } from '../config';\nexport const useOpen = ({\n  initialOpen,\n  disabled,\n  autoclosable,\n  onOpenChange,\n  delayOpening,\n  delayClosing,\n  behavior,\n  shouldBeOpen\n}) => {\n  const openingTimeout = React.useRef(null);\n  const closingTimeout = React.useRef(null);\n  const [isOpen, setIsOpen] = React.useState(initialOpen);\n  const unsetOpeningTimeout = React.useCallback(() => {\n    if (openingTimeout.current) {\n      clearTimeout(openingTimeout.current);\n      openingTimeout.current = null;\n    }\n  }, []);\n  const unsetClosingTimeout = React.useCallback(() => {\n    if (closingTimeout.current) {\n      clearTimeout(closingTimeout.current);\n      closingTimeout.current = null;\n    }\n  }, []);\n  React.useEffect(() => {\n    return () => {\n      unsetOpeningTimeout();\n      unsetClosingTimeout();\n    };\n  }, [unsetClosingTimeout, unsetOpeningTimeout]);\n  const setTooltipOpen = React.useCallback(open => {\n    setIsOpen(open);\n    shouldBeOpen.current = open;\n    onOpenChange === null || onOpenChange === void 0 ? void 0 : onOpenChange(open);\n  }, [onOpenChange, shouldBeOpen]);\n  const openTooltip = React.useCallback(() => {\n    unsetOpeningTimeout();\n    setTooltipOpen(true);\n  }, [setTooltipOpen, unsetOpeningTimeout]);\n  const closeTooltip = React.useCallback(() => {\n    unsetClosingTimeout();\n    setTooltipOpen(false);\n  }, [setTooltipOpen, unsetClosingTimeout]);\n  React.useEffect(() => {\n    if (disabled) {\n      closeTooltip();\n    }\n  }, [disabled, closeTooltip]);\n  useUpdateEffect(() => {\n    if (autoclosable && !shouldBeOpen.current) {\n      closeTooltip();\n    }\n  }, [autoclosable, closeTooltip, shouldBeOpen]);\n  const [defaultDelayOpening, defaultDelayClosing] = delayByBehavior[behavior];\n  const openTooltipDelayed = React.useCallback(() => {\n    openingTimeout.current = setTimeout(() => {\n      openingTimeout.current = null;\n      openTooltip();\n    }, delayOpening !== null && delayOpening !== void 0 ? delayOpening : defaultDelayOpening);\n  }, [defaultDelayOpening, delayOpening, openTooltip]);\n  const closeTooltipDelayed = React.useCallback(() => {\n    closingTimeout.current = setTimeout(() => {\n      closingTimeout.current = null;\n      closeTooltip();\n    }, delayClosing !== null && delayClosing !== void 0 ? delayClosing : defaultDelayClosing);\n  }, [closeTooltip, defaultDelayClosing, delayClosing]);\n  return {\n    isOpen,\n    closingTimeout,\n    openTooltip,\n    openTooltipDelayed,\n    unsetOpeningTimeout,\n    closeTooltip,\n    closeTooltipDelayed,\n    unsetClosingTimeout\n  };\n};","map":{"version":3,"names":["React","useUpdateEffect","delayByBehavior","useOpen","initialOpen","disabled","autoclosable","onOpenChange","delayOpening","delayClosing","behavior","shouldBeOpen","openingTimeout","useRef","closingTimeout","isOpen","setIsOpen","useState","unsetOpeningTimeout","useCallback","current","clearTimeout","unsetClosingTimeout","useEffect","setTooltipOpen","open","openTooltip","closeTooltip","defaultDelayOpening","defaultDelayClosing","openTooltipDelayed","setTimeout","closeTooltipDelayed"],"sources":["/Users/ilaulanov/node_modules/@gravity-ui/uikit/build/esm/components/Popover/hooks/useOpen.js"],"sourcesContent":["import React from 'react';\nimport { useUpdateEffect } from '../../utils/useUpdateEffect';\nimport { delayByBehavior } from '../config';\nexport const useOpen = ({ initialOpen, disabled, autoclosable, onOpenChange, delayOpening, delayClosing, behavior, shouldBeOpen, }) => {\n    const openingTimeout = React.useRef(null);\n    const closingTimeout = React.useRef(null);\n    const [isOpen, setIsOpen] = React.useState(initialOpen);\n    const unsetOpeningTimeout = React.useCallback(() => {\n        if (openingTimeout.current) {\n            clearTimeout(openingTimeout.current);\n            openingTimeout.current = null;\n        }\n    }, []);\n    const unsetClosingTimeout = React.useCallback(() => {\n        if (closingTimeout.current) {\n            clearTimeout(closingTimeout.current);\n            closingTimeout.current = null;\n        }\n    }, []);\n    React.useEffect(() => {\n        return () => {\n            unsetOpeningTimeout();\n            unsetClosingTimeout();\n        };\n    }, [unsetClosingTimeout, unsetOpeningTimeout]);\n    const setTooltipOpen = React.useCallback((open) => {\n        setIsOpen(open);\n        shouldBeOpen.current = open;\n        onOpenChange === null || onOpenChange === void 0 ? void 0 : onOpenChange(open);\n    }, [onOpenChange, shouldBeOpen]);\n    const openTooltip = React.useCallback(() => {\n        unsetOpeningTimeout();\n        setTooltipOpen(true);\n    }, [setTooltipOpen, unsetOpeningTimeout]);\n    const closeTooltip = React.useCallback(() => {\n        unsetClosingTimeout();\n        setTooltipOpen(false);\n    }, [setTooltipOpen, unsetClosingTimeout]);\n    React.useEffect(() => {\n        if (disabled) {\n            closeTooltip();\n        }\n    }, [disabled, closeTooltip]);\n    useUpdateEffect(() => {\n        if (autoclosable && !shouldBeOpen.current) {\n            closeTooltip();\n        }\n    }, [autoclosable, closeTooltip, shouldBeOpen]);\n    const [defaultDelayOpening, defaultDelayClosing] = delayByBehavior[behavior];\n    const openTooltipDelayed = React.useCallback(() => {\n        openingTimeout.current = setTimeout(() => {\n            openingTimeout.current = null;\n            openTooltip();\n        }, delayOpening !== null && delayOpening !== void 0 ? delayOpening : defaultDelayOpening);\n    }, [defaultDelayOpening, delayOpening, openTooltip]);\n    const closeTooltipDelayed = React.useCallback(() => {\n        closingTimeout.current = setTimeout(() => {\n            closingTimeout.current = null;\n            closeTooltip();\n        }, delayClosing !== null && delayClosing !== void 0 ? delayClosing : defaultDelayClosing);\n    }, [closeTooltip, defaultDelayClosing, delayClosing]);\n    return {\n        isOpen,\n        closingTimeout,\n        openTooltip,\n        openTooltipDelayed,\n        unsetOpeningTimeout,\n        closeTooltip,\n        closeTooltipDelayed,\n        unsetClosingTimeout,\n    };\n};\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,eAAe,QAAQ,6BAA6B;AAC7D,SAASC,eAAe,QAAQ,WAAW;AAC3C,OAAO,MAAMC,OAAO,GAAGA,CAAC;EAAEC,WAAW;EAAEC,QAAQ;EAAEC,YAAY;EAAEC,YAAY;EAAEC,YAAY;EAAEC,YAAY;EAAEC,QAAQ;EAAEC;AAAc,CAAC,KAAK;EACnI,MAAMC,cAAc,GAAGZ,KAAK,CAACa,MAAM,CAAC,IAAI,CAAC;EACzC,MAAMC,cAAc,GAAGd,KAAK,CAACa,MAAM,CAAC,IAAI,CAAC;EACzC,MAAM,CAACE,MAAM,EAAEC,SAAS,CAAC,GAAGhB,KAAK,CAACiB,QAAQ,CAACb,WAAW,CAAC;EACvD,MAAMc,mBAAmB,GAAGlB,KAAK,CAACmB,WAAW,CAAC,MAAM;IAChD,IAAIP,cAAc,CAACQ,OAAO,EAAE;MACxBC,YAAY,CAACT,cAAc,CAACQ,OAAO,CAAC;MACpCR,cAAc,CAACQ,OAAO,GAAG,IAAI;IACjC;EACJ,CAAC,EAAE,EAAE,CAAC;EACN,MAAME,mBAAmB,GAAGtB,KAAK,CAACmB,WAAW,CAAC,MAAM;IAChD,IAAIL,cAAc,CAACM,OAAO,EAAE;MACxBC,YAAY,CAACP,cAAc,CAACM,OAAO,CAAC;MACpCN,cAAc,CAACM,OAAO,GAAG,IAAI;IACjC;EACJ,CAAC,EAAE,EAAE,CAAC;EACNpB,KAAK,CAACuB,SAAS,CAAC,MAAM;IAClB,OAAO,MAAM;MACTL,mBAAmB,CAAC,CAAC;MACrBI,mBAAmB,CAAC,CAAC;IACzB,CAAC;EACL,CAAC,EAAE,CAACA,mBAAmB,EAAEJ,mBAAmB,CAAC,CAAC;EAC9C,MAAMM,cAAc,GAAGxB,KAAK,CAACmB,WAAW,CAAEM,IAAI,IAAK;IAC/CT,SAAS,CAACS,IAAI,CAAC;IACfd,YAAY,CAACS,OAAO,GAAGK,IAAI;IAC3BlB,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,YAAY,CAACkB,IAAI,CAAC;EAClF,CAAC,EAAE,CAAClB,YAAY,EAAEI,YAAY,CAAC,CAAC;EAChC,MAAMe,WAAW,GAAG1B,KAAK,CAACmB,WAAW,CAAC,MAAM;IACxCD,mBAAmB,CAAC,CAAC;IACrBM,cAAc,CAAC,IAAI,CAAC;EACxB,CAAC,EAAE,CAACA,cAAc,EAAEN,mBAAmB,CAAC,CAAC;EACzC,MAAMS,YAAY,GAAG3B,KAAK,CAACmB,WAAW,CAAC,MAAM;IACzCG,mBAAmB,CAAC,CAAC;IACrBE,cAAc,CAAC,KAAK,CAAC;EACzB,CAAC,EAAE,CAACA,cAAc,EAAEF,mBAAmB,CAAC,CAAC;EACzCtB,KAAK,CAACuB,SAAS,CAAC,MAAM;IAClB,IAAIlB,QAAQ,EAAE;MACVsB,YAAY,CAAC,CAAC;IAClB;EACJ,CAAC,EAAE,CAACtB,QAAQ,EAAEsB,YAAY,CAAC,CAAC;EAC5B1B,eAAe,CAAC,MAAM;IAClB,IAAIK,YAAY,IAAI,CAACK,YAAY,CAACS,OAAO,EAAE;MACvCO,YAAY,CAAC,CAAC;IAClB;EACJ,CAAC,EAAE,CAACrB,YAAY,EAAEqB,YAAY,EAAEhB,YAAY,CAAC,CAAC;EAC9C,MAAM,CAACiB,mBAAmB,EAAEC,mBAAmB,CAAC,GAAG3B,eAAe,CAACQ,QAAQ,CAAC;EAC5E,MAAMoB,kBAAkB,GAAG9B,KAAK,CAACmB,WAAW,CAAC,MAAM;IAC/CP,cAAc,CAACQ,OAAO,GAAGW,UAAU,CAAC,MAAM;MACtCnB,cAAc,CAACQ,OAAO,GAAG,IAAI;MAC7BM,WAAW,CAAC,CAAC;IACjB,CAAC,EAAElB,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAGA,YAAY,GAAGoB,mBAAmB,CAAC;EAC7F,CAAC,EAAE,CAACA,mBAAmB,EAAEpB,YAAY,EAAEkB,WAAW,CAAC,CAAC;EACpD,MAAMM,mBAAmB,GAAGhC,KAAK,CAACmB,WAAW,CAAC,MAAM;IAChDL,cAAc,CAACM,OAAO,GAAGW,UAAU,CAAC,MAAM;MACtCjB,cAAc,CAACM,OAAO,GAAG,IAAI;MAC7BO,YAAY,CAAC,CAAC;IAClB,CAAC,EAAElB,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAGA,YAAY,GAAGoB,mBAAmB,CAAC;EAC7F,CAAC,EAAE,CAACF,YAAY,EAAEE,mBAAmB,EAAEpB,YAAY,CAAC,CAAC;EACrD,OAAO;IACHM,MAAM;IACND,cAAc;IACdY,WAAW;IACXI,kBAAkB;IAClBZ,mBAAmB;IACnBS,YAAY;IACZK,mBAAmB;IACnBV;EACJ,CAAC;AACL,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}