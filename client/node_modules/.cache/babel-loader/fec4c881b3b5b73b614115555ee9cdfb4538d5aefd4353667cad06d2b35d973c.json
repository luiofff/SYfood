{"ast":null,"code":"import React from 'react';\nimport { SyntheticFocusEvent } from './SyntheticFocusEvent';\n// React does not fire onBlur when an element is disabled https://github.com/facebook/react/issues/9142\nexport function useSyntheticBlurEvent(onBlur) {\n  const stateRef = React.useRef({\n    isFocused: false,\n    observer: null\n  });\n  React.useEffect(() => {\n    const state = stateRef.current;\n    return () => {\n      if (state.observer) {\n        state.observer.disconnect();\n        state.observer = null;\n      }\n    };\n  }, []);\n  const handleFocus = React.useCallback(event => {\n    const target = event.target;\n    if (target instanceof HTMLButtonElement || target instanceof HTMLInputElement || target instanceof HTMLTextAreaElement || target instanceof HTMLSelectElement) {\n      stateRef.current.isFocused = true;\n      const handleBlur = e => {\n        stateRef.current.isFocused = false;\n        if (target.disabled) {\n          onBlur === null || onBlur === void 0 ? void 0 : onBlur(new SyntheticFocusEvent('blur', e));\n        }\n        if (stateRef.current.observer) {\n          stateRef.current.observer.disconnect();\n          stateRef.current.observer = null;\n        }\n      };\n      // TS can't resolve correct definition for addEventListener when target is union type\n      // @ts-expect-error\n      target.addEventListener('focusout', handleBlur, {\n        once: true\n      });\n      const observer = new MutationObserver(() => {\n        if (stateRef.current.isFocused && target.disabled) {\n          observer.disconnect();\n          stateRef.current.observer = null;\n          const relatedTarget = target === document.activeElement ? null : document.activeElement;\n          target.dispatchEvent(new FocusEvent('blur', {\n            relatedTarget\n          }));\n          target.dispatchEvent(new FocusEvent('focusout', {\n            relatedTarget,\n            bubbles: true\n          }));\n        }\n      });\n      observer.observe(target, {\n        attributes: true,\n        attributeFilter: ['disabled']\n      });\n      stateRef.current.observer = observer;\n    }\n  }, [onBlur]);\n  return handleFocus;\n}","map":{"version":3,"names":["React","SyntheticFocusEvent","useSyntheticBlurEvent","onBlur","stateRef","useRef","isFocused","observer","useEffect","state","current","disconnect","handleFocus","useCallback","event","target","HTMLButtonElement","HTMLInputElement","HTMLTextAreaElement","HTMLSelectElement","handleBlur","e","disabled","addEventListener","once","MutationObserver","relatedTarget","document","activeElement","dispatchEvent","FocusEvent","bubbles","observe","attributes","attributeFilter"],"sources":["/Users/ilaulanov/Documents/SynopsisYard/SYfood/client/node_modules/@gravity-ui/uikit/build/esm/hooks/useFocusWithin/useSyntheticBlurEvent.js"],"sourcesContent":["import React from 'react';\nimport { SyntheticFocusEvent } from './SyntheticFocusEvent';\n// React does not fire onBlur when an element is disabled https://github.com/facebook/react/issues/9142\nexport function useSyntheticBlurEvent(onBlur) {\n    const stateRef = React.useRef({\n        isFocused: false,\n        observer: null,\n    });\n    React.useEffect(() => {\n        const state = stateRef.current;\n        return () => {\n            if (state.observer) {\n                state.observer.disconnect();\n                state.observer = null;\n            }\n        };\n    }, []);\n    const handleFocus = React.useCallback((event) => {\n        const target = event.target;\n        if (target instanceof HTMLButtonElement ||\n            target instanceof HTMLInputElement ||\n            target instanceof HTMLTextAreaElement ||\n            target instanceof HTMLSelectElement) {\n            stateRef.current.isFocused = true;\n            const handleBlur = (e) => {\n                stateRef.current.isFocused = false;\n                if (target.disabled) {\n                    onBlur === null || onBlur === void 0 ? void 0 : onBlur(new SyntheticFocusEvent('blur', e));\n                }\n                if (stateRef.current.observer) {\n                    stateRef.current.observer.disconnect();\n                    stateRef.current.observer = null;\n                }\n            };\n            // TS can't resolve correct definition for addEventListener when target is union type\n            // @ts-expect-error\n            target.addEventListener('focusout', handleBlur, { once: true });\n            const observer = new MutationObserver(() => {\n                if (stateRef.current.isFocused && target.disabled) {\n                    observer.disconnect();\n                    stateRef.current.observer = null;\n                    const relatedTarget = target === document.activeElement ? null : document.activeElement;\n                    target.dispatchEvent(new FocusEvent('blur', { relatedTarget }));\n                    target.dispatchEvent(new FocusEvent('focusout', { relatedTarget, bubbles: true }));\n                }\n            });\n            observer.observe(target, { attributes: true, attributeFilter: ['disabled'] });\n            stateRef.current.observer = observer;\n        }\n    }, [onBlur]);\n    return handleFocus;\n}\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,mBAAmB,QAAQ,uBAAuB;AAC3D;AACA,OAAO,SAASC,qBAAqBA,CAACC,MAAM,EAAE;EAC1C,MAAMC,QAAQ,GAAGJ,KAAK,CAACK,MAAM,CAAC;IAC1BC,SAAS,EAAE,KAAK;IAChBC,QAAQ,EAAE;EACd,CAAC,CAAC;EACFP,KAAK,CAACQ,SAAS,CAAC,MAAM;IAClB,MAAMC,KAAK,GAAGL,QAAQ,CAACM,OAAO;IAC9B,OAAO,MAAM;MACT,IAAID,KAAK,CAACF,QAAQ,EAAE;QAChBE,KAAK,CAACF,QAAQ,CAACI,UAAU,CAAC,CAAC;QAC3BF,KAAK,CAACF,QAAQ,GAAG,IAAI;MACzB;IACJ,CAAC;EACL,CAAC,EAAE,EAAE,CAAC;EACN,MAAMK,WAAW,GAAGZ,KAAK,CAACa,WAAW,CAAEC,KAAK,IAAK;IAC7C,MAAMC,MAAM,GAAGD,KAAK,CAACC,MAAM;IAC3B,IAAIA,MAAM,YAAYC,iBAAiB,IACnCD,MAAM,YAAYE,gBAAgB,IAClCF,MAAM,YAAYG,mBAAmB,IACrCH,MAAM,YAAYI,iBAAiB,EAAE;MACrCf,QAAQ,CAACM,OAAO,CAACJ,SAAS,GAAG,IAAI;MACjC,MAAMc,UAAU,GAAIC,CAAC,IAAK;QACtBjB,QAAQ,CAACM,OAAO,CAACJ,SAAS,GAAG,KAAK;QAClC,IAAIS,MAAM,CAACO,QAAQ,EAAE;UACjBnB,MAAM,KAAK,IAAI,IAAIA,MAAM,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,MAAM,CAAC,IAAIF,mBAAmB,CAAC,MAAM,EAAEoB,CAAC,CAAC,CAAC;QAC9F;QACA,IAAIjB,QAAQ,CAACM,OAAO,CAACH,QAAQ,EAAE;UAC3BH,QAAQ,CAACM,OAAO,CAACH,QAAQ,CAACI,UAAU,CAAC,CAAC;UACtCP,QAAQ,CAACM,OAAO,CAACH,QAAQ,GAAG,IAAI;QACpC;MACJ,CAAC;MACD;MACA;MACAQ,MAAM,CAACQ,gBAAgB,CAAC,UAAU,EAAEH,UAAU,EAAE;QAAEI,IAAI,EAAE;MAAK,CAAC,CAAC;MAC/D,MAAMjB,QAAQ,GAAG,IAAIkB,gBAAgB,CAAC,MAAM;QACxC,IAAIrB,QAAQ,CAACM,OAAO,CAACJ,SAAS,IAAIS,MAAM,CAACO,QAAQ,EAAE;UAC/Cf,QAAQ,CAACI,UAAU,CAAC,CAAC;UACrBP,QAAQ,CAACM,OAAO,CAACH,QAAQ,GAAG,IAAI;UAChC,MAAMmB,aAAa,GAAGX,MAAM,KAAKY,QAAQ,CAACC,aAAa,GAAG,IAAI,GAAGD,QAAQ,CAACC,aAAa;UACvFb,MAAM,CAACc,aAAa,CAAC,IAAIC,UAAU,CAAC,MAAM,EAAE;YAAEJ;UAAc,CAAC,CAAC,CAAC;UAC/DX,MAAM,CAACc,aAAa,CAAC,IAAIC,UAAU,CAAC,UAAU,EAAE;YAAEJ,aAAa;YAAEK,OAAO,EAAE;UAAK,CAAC,CAAC,CAAC;QACtF;MACJ,CAAC,CAAC;MACFxB,QAAQ,CAACyB,OAAO,CAACjB,MAAM,EAAE;QAAEkB,UAAU,EAAE,IAAI;QAAEC,eAAe,EAAE,CAAC,UAAU;MAAE,CAAC,CAAC;MAC7E9B,QAAQ,CAACM,OAAO,CAACH,QAAQ,GAAGA,QAAQ;IACxC;EACJ,CAAC,EAAE,CAACJ,MAAM,CAAC,CAAC;EACZ,OAAOS,WAAW;AACtB"},"metadata":{},"sourceType":"module","externalDependencies":[]}