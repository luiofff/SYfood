{"ast":null,"code":"import { replaceParams } from './replace-params';\nimport { PluralForm } from './types';\nimport pluralizerEn from './plural/en';\nimport pluralizerRu from './plural/ru';\nexport * from './types';\nexport class I18N {\n  constructor(options) {\n    this.data = {};\n    this.lang = undefined;\n    this.pluralizers = {\n      en: pluralizerEn,\n      ru: pluralizerRu\n    };\n    this.logger = null;\n    this.logger = (options === null || options === void 0 ? void 0 : options.logger) || null;\n  }\n  setLang(lang) {\n    this.lang = lang;\n  }\n  configurePluralization(pluralizers) {\n    this.pluralizers = Object.assign({}, this.pluralizers, pluralizers);\n  }\n  registerKeyset(lang, keysetName) {\n    let data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    if (this.data[lang] && Object.prototype.hasOwnProperty.call(this.data[lang], keysetName)) {\n      throw new Error(\"Keyset '\".concat(keysetName, \"' is already registered, aborting!\"));\n    }\n    this.data[lang] = Object.assign({}, this.data[lang], {\n      [keysetName]: data\n    });\n  }\n  registerKeysets(lang, data) {\n    Object.keys(data).forEach(keysetName => {\n      this.registerKeyset(lang, keysetName, data[keysetName]);\n    });\n  }\n  has(keysetName, key, lang) {\n    const languageData = this.getLanguageData(lang);\n    return Boolean(languageData && languageData[keysetName] && languageData[keysetName][key]);\n  }\n  i18n(keysetName, key, params) {\n    const languageData = this.getLanguageData(this.lang);\n    if (typeof languageData === 'undefined') {\n      throw new Error(\"Language '\".concat(this.lang, \"' is not defined, make sure you call setLang for the same language you called registerKeysets for!\"));\n    }\n    if (Object.keys(languageData).length === 0) {\n      this.warn('Language data is empty.');\n      return key;\n    }\n    const keyset = languageData[keysetName];\n    if (!keyset) {\n      this.warn('Keyset not found.', keysetName);\n      return key;\n    }\n    if (Object.keys(keyset).length === 0) {\n      this.warn('Keyset is empty.', keysetName);\n      return key;\n    }\n    const keyValue = keyset && keyset[key];\n    let result;\n    if (typeof keyValue === 'undefined') {\n      this.warn('Missing key.', keysetName, key);\n      return key;\n    }\n    if (Array.isArray(keyValue)) {\n      if (keyValue.length < 3) {\n        this.warn('Missing required plurals', keysetName, key);\n        return key;\n      }\n      const count = Number(params === null || params === void 0 ? void 0 : params.count);\n      if (Number.isNaN(count)) {\n        this.warn('Missing params.count for key.', keysetName, key);\n        return key;\n      }\n      const pluralizer = this.getLanguagePluralizer(this.lang);\n      result = keyValue[pluralizer(count, PluralForm)] || keyValue[PluralForm.Many];\n      if (keyValue[PluralForm.None] === undefined) {\n        this.warn('Missing key for 0', keysetName, key);\n      }\n    } else {\n      result = keyValue;\n    }\n    if (params) {\n      result = replaceParams(result, params);\n    }\n    return result;\n  }\n  keyset(keysetName) {\n    return (key, params) => {\n      return this.i18n(keysetName, key, params);\n    };\n  }\n  warn(msg, keyset, key) {\n    var _a;\n    let cacheKey = '';\n    if (keyset) {\n      cacheKey += keyset;\n      if (key) {\n        cacheKey += \".\".concat(key);\n      }\n    } else {\n      cacheKey = 'languageData';\n    }\n    (_a = this.logger) === null || _a === void 0 ? void 0 : _a.log(\"I18n: \".concat(msg), {\n      level: 'info',\n      logger: cacheKey,\n      extra: {\n        type: 'i18n'\n      }\n    });\n  }\n  getLanguageData(lang) {\n    const langCode = lang || this.lang;\n    return langCode ? this.data[langCode] : undefined;\n  }\n  getLanguagePluralizer(lang) {\n    const pluralizer = lang ? this.pluralizers[lang] : undefined;\n    if (!pluralizer) {\n      this.warn(\"Pluralization is not configured for language '\".concat(lang, \"', falling back to the english ruleset\"));\n    }\n    return pluralizer || pluralizerEn;\n  }\n}","map":{"version":3,"names":["replaceParams","PluralForm","pluralizerEn","pluralizerRu","I18N","constructor","options","data","lang","undefined","pluralizers","en","ru","logger","setLang","configurePluralization","Object","assign","registerKeyset","keysetName","arguments","length","prototype","hasOwnProperty","call","Error","concat","registerKeysets","keys","forEach","has","key","languageData","getLanguageData","Boolean","i18n","params","warn","keyset","keyValue","result","Array","isArray","count","Number","isNaN","pluralizer","getLanguagePluralizer","Many","None","msg","_a","cacheKey","log","level","extra","type","langCode"],"sources":["/Users/ilaulanov/Documents/SynopsisYard/SYfood/client/node_modules/@gravity-ui/i18n/build/esm/index.js"],"sourcesContent":["import { replaceParams } from './replace-params';\nimport { PluralForm } from './types';\nimport pluralizerEn from './plural/en';\nimport pluralizerRu from './plural/ru';\nexport * from './types';\nexport class I18N {\n    constructor(options) {\n        this.data = {};\n        this.lang = undefined;\n        this.pluralizers = {\n            en: pluralizerEn,\n            ru: pluralizerRu,\n        };\n        this.logger = null;\n        this.logger = (options === null || options === void 0 ? void 0 : options.logger) || null;\n    }\n    setLang(lang) {\n        this.lang = lang;\n    }\n    configurePluralization(pluralizers) {\n        this.pluralizers = Object.assign({}, this.pluralizers, pluralizers);\n    }\n    registerKeyset(lang, keysetName, data = {}) {\n        if (this.data[lang] && Object.prototype.hasOwnProperty.call(this.data[lang], keysetName)) {\n            throw new Error(`Keyset '${keysetName}' is already registered, aborting!`);\n        }\n        this.data[lang] = Object.assign({}, this.data[lang], { [keysetName]: data });\n    }\n    registerKeysets(lang, data) {\n        Object.keys(data).forEach((keysetName) => {\n            this.registerKeyset(lang, keysetName, data[keysetName]);\n        });\n    }\n    has(keysetName, key, lang) {\n        const languageData = this.getLanguageData(lang);\n        return Boolean(languageData && languageData[keysetName] && languageData[keysetName][key]);\n    }\n    i18n(keysetName, key, params) {\n        const languageData = this.getLanguageData(this.lang);\n        if (typeof languageData === 'undefined') {\n            throw new Error(`Language '${this.lang}' is not defined, make sure you call setLang for the same language you called registerKeysets for!`);\n        }\n        if (Object.keys(languageData).length === 0) {\n            this.warn('Language data is empty.');\n            return key;\n        }\n        const keyset = languageData[keysetName];\n        if (!keyset) {\n            this.warn('Keyset not found.', keysetName);\n            return key;\n        }\n        if (Object.keys(keyset).length === 0) {\n            this.warn('Keyset is empty.', keysetName);\n            return key;\n        }\n        const keyValue = keyset && keyset[key];\n        let result;\n        if (typeof keyValue === 'undefined') {\n            this.warn('Missing key.', keysetName, key);\n            return key;\n        }\n        if (Array.isArray(keyValue)) {\n            if (keyValue.length < 3) {\n                this.warn('Missing required plurals', keysetName, key);\n                return key;\n            }\n            const count = Number(params === null || params === void 0 ? void 0 : params.count);\n            if (Number.isNaN(count)) {\n                this.warn('Missing params.count for key.', keysetName, key);\n                return key;\n            }\n            const pluralizer = this.getLanguagePluralizer(this.lang);\n            result = keyValue[pluralizer(count, PluralForm)] || keyValue[PluralForm.Many];\n            if (keyValue[PluralForm.None] === undefined) {\n                this.warn('Missing key for 0', keysetName, key);\n            }\n        }\n        else {\n            result = keyValue;\n        }\n        if (params) {\n            result = replaceParams(result, params);\n        }\n        return result;\n    }\n    keyset(keysetName) {\n        return (key, params) => {\n            return this.i18n(keysetName, key, params);\n        };\n    }\n    warn(msg, keyset, key) {\n        var _a;\n        let cacheKey = '';\n        if (keyset) {\n            cacheKey += keyset;\n            if (key) {\n                cacheKey += `.${key}`;\n            }\n        }\n        else {\n            cacheKey = 'languageData';\n        }\n        (_a = this.logger) === null || _a === void 0 ? void 0 : _a.log(`I18n: ${msg}`, {\n            level: 'info',\n            logger: cacheKey,\n            extra: {\n                type: 'i18n'\n            }\n        });\n    }\n    getLanguageData(lang) {\n        const langCode = lang || this.lang;\n        return langCode ? this.data[langCode] : undefined;\n    }\n    getLanguagePluralizer(lang) {\n        const pluralizer = lang ? this.pluralizers[lang] : undefined;\n        if (!pluralizer) {\n            this.warn(`Pluralization is not configured for language '${lang}', falling back to the english ruleset`);\n        }\n        return pluralizer || pluralizerEn;\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}