{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useSelector}from'react-redux';import{useLocation}from'react-router-dom';import axios from'axios';import styles from\"./ResultPage.module.css\";import classNames from\"classnames\";import{Tooltip}from'@gravity-ui/uikit';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ResultPage(){const[title,setTitle]=useState(\"\");const[title_full,setTitle_full]=useState(\"\");const[ingredients,setIngredients]=useState(\"\");const[instructions,setInstructions]=useState(\"\");const[index,setIndex]=useState(0);const[max,setMax]=useState(0);const[array,setArray]=useState([]);const location=useLocation();const queryParams=new URLSearchParams(location.search);const query=queryParams.get('query');const options={method:'GET',url:'https://recipe-by-api-ninjas.p.rapidapi.com/v1/recipe',params:{query:query},headers:{'X-RapidAPI-Key':'4c0913e8fbmshee3d5797b276796p1dabc3jsnd83be6ecfb8b','X-RapidAPI-Host':'recipe-by-api-ninjas.p.rapidapi.com'}};const getData=async()=>{try{const response=await axios.request(options);setArray(response.data);}catch(error){console.error(error);}};const back=()=>{if(index>0){setIndex(index-1);}};const next=()=>{if(index<array.length-1){setIndex(index+1);}};useEffect(()=>{getData();},[query]);// Извлекать данные при изменении запроса\nuseEffect(()=>{setMax(array.length);if(array.length>0){if(array[index].title.length>17){setTitle_full(array[index].title);setTitle(array[index].title.slice(0,17)+\"...\");}else{setTitle(array[index].title);}setIngredients(array[index].ingredients);setInstructions(array[index].instructions);}},[index,array]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"header\",{className:classNames(styles.header,styles.desktop),children:[index>0?/*#__PURE__*/_jsxs(\"button\",{className:styles.nav_button,onClick:back,children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u2190\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.button_title,children:\"\\u041F\\u0440\\u0435\\u0434\\u044B\\u0434\\u0443\\u0449\\u0438\\u0439\"})]}):/*#__PURE__*/_jsx(\"button\",{className:styles.nav_button}),/*#__PURE__*/_jsx(Tooltip,{content:/*#__PURE__*/_jsx(\"h1\",{className:styles.title,children:title_full}),children:/*#__PURE__*/_jsx(\"div\",{tabIndex:0,children:/*#__PURE__*/_jsx(\"h1\",{className:styles.title,children:title})})}),index<array.length-1?/*#__PURE__*/_jsxs(\"button\",{className:styles.nav_button,onClick:next,children:[/*#__PURE__*/_jsx(\"span\",{className:styles.button_title,children:\"\\u0421\\u043B\\u0435\\u0434\\u0443\\u044E\\u0449\\u0438\\u0439\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u2192\"})]}):/*#__PURE__*/_jsx(\"button\",{className:styles.nav_button})]}),/*#__PURE__*/_jsx(Tooltip,{content:/*#__PURE__*/_jsx(\"h1\",{className:styles.title,children:title_full}),children:/*#__PURE__*/_jsx(\"div\",{tabIndex:0,className:styles.title_mobile_block,children:/*#__PURE__*/_jsx(\"h1\",{className:styles.title,children:title})})}),/*#__PURE__*/_jsxs(\"header\",{className:classNames(styles.header,styles.mobile),children:[index>0?/*#__PURE__*/_jsxs(\"button\",{className:styles.nav_button,onClick:back,children:[/*#__PURE__*/_jsx(\"span\",{className:styles.arrow,children:\"\\u2190\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.button_title,children:\"\\u041F\\u0440\\u0435\\u0434\\u044B\\u0434\\u0443\\u0449\\u0438\\u0439\"})]}):/*#__PURE__*/_jsx(\"button\",{className:styles.nav_button}),index<array.length-1?/*#__PURE__*/_jsxs(\"button\",{className:styles.nav_button,onClick:next,children:[/*#__PURE__*/_jsx(\"span\",{className:styles.button_title,children:\"\\u0421\\u043B\\u0435\\u0434\\u0443\\u044E\\u0449\\u0438\\u0439\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.arrow,children:\"\\u2192\"})]}):/*#__PURE__*/_jsx(\"button\",{className:styles.nav_button})]}),/*#__PURE__*/_jsxs(\"section\",{className:styles.content,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.content_block,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0418\\u043D\\u0433\\u0440\\u0435\\u0434\\u0438\\u0435\\u043D\\u0442\\u044B\"}),/*#__PURE__*/_jsx(\"p\",{children:ingredients})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.content_block,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0418\\u043D\\u0441\\u0442\\u0440\\u0443\\u043A\\u0446\\u0438\\u0438\"}),/*#__PURE__*/_jsx(\"p\",{children:instructions})]})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useSelector","useLocation","axios","styles","classNames","Tooltip","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ResultPage","title","setTitle","title_full","setTitle_full","ingredients","setIngredients","instructions","setInstructions","index","setIndex","max","setMax","array","setArray","location","queryParams","URLSearchParams","search","query","get","options","method","url","params","headers","getData","response","request","data","error","console","back","next","length","slice","children","className","header","desktop","nav_button","onClick","button_title","content","tabIndex","title_mobile_block","mobile","arrow","content_block"],"sources":["/Users/ilaulanov/Documents/SynopsisYard/SYfood/client/src/pages/ResultPage/ResultPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useSelector } from 'react-redux';\nimport { useLocation } from 'react-router-dom';\nimport axios from 'axios';\nimport styles from \"./ResultPage.module.css\";\nimport classNames from \"classnames\";\nimport {Tooltip} from '@gravity-ui/uikit';\n\nexport default function ResultPage() {\n  const [title, setTitle] = useState(\"\");\n  const [title_full, setTitle_full] = useState(\"\");\n  const [ingredients, setIngredients] = useState(\"\");\n  const [instructions, setInstructions] = useState(\"\");\n  const [index, setIndex] = useState(0);\n  const [max, setMax] = useState(0);\n  const [array, setArray] = useState([]);\n\n  const location = useLocation();\n  const queryParams = new URLSearchParams(location.search);\n  const query = queryParams.get('query');\n\n  const options = {\n    method: 'GET',\n    url: 'https://recipe-by-api-ninjas.p.rapidapi.com/v1/recipe',\n    params: { query: query },\n    headers: {\n      'X-RapidAPI-Key': '4c0913e8fbmshee3d5797b276796p1dabc3jsnd83be6ecfb8b',\n      'X-RapidAPI-Host': 'recipe-by-api-ninjas.p.rapidapi.com'\n    }\n  };\n\n  const getData = async () => {\n    try {\n      const response = await axios.request(options);\n      setArray(response.data);\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  const back = () => {\n    if (index > 0) {\n      setIndex(index - 1);\n    }\n  }\n\n  const next = () => {\n    if (index < array.length - 1) {\n      setIndex(index + 1);\n    }\n  }\n\n  useEffect(() => {\n    getData();\n  }, [query]); // Извлекать данные при изменении запроса\n\n  useEffect(() => {\n    setMax(array.length);\n\n    if (array.length > 0) {\n      if (array[index].title.length > 17) {\n        setTitle_full(array[index].title);\n        setTitle(array[index].title.slice(0, 17) + \"...\");\n      } else {\n        setTitle(array[index].title);\n      }\n      setIngredients(array[index].ingredients);\n      setInstructions(array[index].instructions);\n    }\n  }, [index, array]);\n\n  return (\n    <>\n      <header className={classNames(styles.header, styles.desktop)}>\n        {index > 0 ? (\n          <button className={styles.nav_button} onClick={back}>\n            <span>←</span>\n            <span className={styles.button_title}>Предыдущий</span>\n          </button>\n        ) :\n        (\n            <button className={styles.nav_button}>\n            </button> \n        )}\n\n        <Tooltip content={<h1 className={styles.title}>{title_full}</h1>}>\n            <div tabIndex={0}>\n                <h1 className={styles.title}>{title}</h1>\n            </div>\n        </Tooltip>\n\n        {index < array.length - 1 ? (\n            <button className={styles.nav_button} onClick={next}>\n                <span className={styles.button_title}>Следующий</span>\n                <span>→</span>\n            </button>\n        ) :\n        (\n            <button className={styles.nav_button}>\n            </button>\n        )}\n      </header>\n\n      {/* mobile */}\n\n      <Tooltip content={<h1 className={styles.title}>{title_full}</h1>}>\n            <div tabIndex={0} className={styles.title_mobile_block}>\n                <h1 className={styles.title}>{title}</h1>\n            </div>\n      </Tooltip>\n\n      <header className={classNames(styles.header, styles.mobile)}>\n        {index > 0 ? (\n          <button className={styles.nav_button} onClick={back}>\n            <span className={styles.arrow}>←</span>\n            <span className={styles.button_title}>Предыдущий</span>\n          </button>\n        ) :\n        (\n            <button className={styles.nav_button}>\n            </button> \n        )}\n\n        {index < array.length - 1 ? (\n            <button className={styles.nav_button} onClick={next}>\n                <span className={styles.button_title}>Следующий</span>\n                <span className={styles.arrow}>→</span>\n            </button>\n        ) :\n        (\n            <button className={styles.nav_button}>\n            </button>\n        )}\n      </header>\n\n      <section className={styles.content}>\n        <div className={styles.content_block}>\n          <h1>Ингредиенты</h1>\n          <p>{ingredients}</p>\n        </div>\n        <div className={styles.content_block}>\n          <h1>Инструкции</h1>\n          <p>{instructions}</p>\n        </div>\n      </section>\n    </>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}