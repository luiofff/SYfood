{"ast":null,"code":"import React from 'react';\nimport { moveBack } from './moveBack';\nimport { moveForward } from './moveForward';\nexport function useListNavigation({\n  items,\n  skip,\n  pageSize,\n  processHomeKey = true,\n  processEndKey = true,\n  anchorRef,\n  disabled = false,\n  initialValue = -1,\n  onAnchorKeyDown\n}) {\n  const [activeItemIndex, setActiveItemIndex] = React.useState(initialValue);\n  const reset = React.useCallback(() => {\n    setActiveItemIndex(initialValue);\n  }, [initialValue]);\n  React.useEffect(() => {\n    if (items) {\n      reset();\n    }\n  }, [items, reset]);\n  React.useLayoutEffect(() => {\n    if (disabled) {\n      return undefined;\n    }\n    const canNavigate = items.some(item => !(skip === null || skip === void 0 ? void 0 : skip(item)));\n    if (!canNavigate) {\n      return undefined;\n    }\n    const anchor = anchorRef === null || anchorRef === void 0 ? void 0 : anchorRef.current;\n    if (!anchor) {\n      return undefined;\n    }\n    const handleKeyDown = event => {\n      const shouldProcessKeydown = onAnchorKeyDown === null || onAnchorKeyDown === void 0 ? void 0 : onAnchorKeyDown(activeItemIndex, event);\n      if (shouldProcessKeydown === false) {\n        return;\n      }\n      switch (event.key) {\n        case 'ArrowDown':\n          {\n            event.preventDefault();\n            // Go 1 step forward\n            setActiveItemIndex(previousActiveItemIndex => moveForward(items, previousActiveItemIndex, 1, skip));\n            break;\n          }\n        case 'ArrowUp':\n          {\n            event.preventDefault();\n            // Go 1 step back\n            setActiveItemIndex(previousActiveItemIndex => moveBack(items, previousActiveItemIndex, 1, skip));\n            break;\n          }\n        case 'PageDown':\n          {\n            if (!pageSize) {\n              return;\n            }\n            event.preventDefault();\n            // Go pageSize steps forward\n            setActiveItemIndex(previousActiveItemIndex => moveForward(items, previousActiveItemIndex, pageSize, skip));\n            break;\n          }\n        case 'PageUp':\n          {\n            if (!pageSize) {\n              return;\n            }\n            event.preventDefault();\n            // Go pageSize steps back\n            setActiveItemIndex(previousActiveItemIndex => moveBack(items, previousActiveItemIndex, pageSize, skip));\n            break;\n          }\n        case 'Home':\n          {\n            if (!processHomeKey) {\n              return;\n            }\n            event.preventDefault();\n            // Go to the start of the list\n            setActiveItemIndex(previousActiveItemIndex => moveBack(items, previousActiveItemIndex, previousActiveItemIndex, skip));\n            break;\n          }\n        case 'End':\n          {\n            if (!processEndKey) {\n              return;\n            }\n            event.preventDefault();\n            // Go to the end of the list\n            setActiveItemIndex(previousActiveItemIndex => moveBack(items, previousActiveItemIndex, previousActiveItemIndex + 1, skip));\n            break;\n          }\n      }\n    };\n    anchor.addEventListener('keydown', handleKeyDown);\n    return () => {\n      anchor.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [activeItemIndex, anchorRef, disabled, items, onAnchorKeyDown, pageSize, processEndKey, processHomeKey, skip]);\n  return {\n    activeItemIndex,\n    setActiveItemIndex,\n    reset\n  };\n}","map":{"version":3,"names":["React","moveBack","moveForward","useListNavigation","items","skip","pageSize","processHomeKey","processEndKey","anchorRef","disabled","initialValue","onAnchorKeyDown","activeItemIndex","setActiveItemIndex","useState","reset","useCallback","useEffect","useLayoutEffect","undefined","canNavigate","some","item","anchor","current","handleKeyDown","event","shouldProcessKeydown","key","preventDefault","previousActiveItemIndex","addEventListener","removeEventListener"],"sources":["/Users/ilaulanov/node_modules/@gravity-ui/uikit/build/esm/components/utils/useListNavigation/useListNavigation.js"],"sourcesContent":["import React from 'react';\nimport { moveBack } from './moveBack';\nimport { moveForward } from './moveForward';\nexport function useListNavigation({ items, skip, pageSize, processHomeKey = true, processEndKey = true, anchorRef, disabled = false, initialValue = -1, onAnchorKeyDown, }) {\n    const [activeItemIndex, setActiveItemIndex] = React.useState(initialValue);\n    const reset = React.useCallback(() => {\n        setActiveItemIndex(initialValue);\n    }, [initialValue]);\n    React.useEffect(() => {\n        if (items) {\n            reset();\n        }\n    }, [items, reset]);\n    React.useLayoutEffect(() => {\n        if (disabled) {\n            return undefined;\n        }\n        const canNavigate = items.some((item) => !(skip === null || skip === void 0 ? void 0 : skip(item)));\n        if (!canNavigate) {\n            return undefined;\n        }\n        const anchor = anchorRef === null || anchorRef === void 0 ? void 0 : anchorRef.current;\n        if (!anchor) {\n            return undefined;\n        }\n        const handleKeyDown = (event) => {\n            const shouldProcessKeydown = onAnchorKeyDown === null || onAnchorKeyDown === void 0 ? void 0 : onAnchorKeyDown(activeItemIndex, event);\n            if (shouldProcessKeydown === false) {\n                return;\n            }\n            switch (event.key) {\n                case 'ArrowDown': {\n                    event.preventDefault();\n                    // Go 1 step forward\n                    setActiveItemIndex((previousActiveItemIndex) => moveForward(items, previousActiveItemIndex, 1, skip));\n                    break;\n                }\n                case 'ArrowUp': {\n                    event.preventDefault();\n                    // Go 1 step back\n                    setActiveItemIndex((previousActiveItemIndex) => moveBack(items, previousActiveItemIndex, 1, skip));\n                    break;\n                }\n                case 'PageDown': {\n                    if (!pageSize) {\n                        return;\n                    }\n                    event.preventDefault();\n                    // Go pageSize steps forward\n                    setActiveItemIndex((previousActiveItemIndex) => moveForward(items, previousActiveItemIndex, pageSize, skip));\n                    break;\n                }\n                case 'PageUp': {\n                    if (!pageSize) {\n                        return;\n                    }\n                    event.preventDefault();\n                    // Go pageSize steps back\n                    setActiveItemIndex((previousActiveItemIndex) => moveBack(items, previousActiveItemIndex, pageSize, skip));\n                    break;\n                }\n                case 'Home': {\n                    if (!processHomeKey) {\n                        return;\n                    }\n                    event.preventDefault();\n                    // Go to the start of the list\n                    setActiveItemIndex((previousActiveItemIndex) => moveBack(items, previousActiveItemIndex, previousActiveItemIndex, skip));\n                    break;\n                }\n                case 'End': {\n                    if (!processEndKey) {\n                        return;\n                    }\n                    event.preventDefault();\n                    // Go to the end of the list\n                    setActiveItemIndex((previousActiveItemIndex) => moveBack(items, previousActiveItemIndex, previousActiveItemIndex + 1, skip));\n                    break;\n                }\n            }\n        };\n        anchor.addEventListener('keydown', handleKeyDown);\n        return () => {\n            anchor.removeEventListener('keydown', handleKeyDown);\n        };\n    }, [\n        activeItemIndex,\n        anchorRef,\n        disabled,\n        items,\n        onAnchorKeyDown,\n        pageSize,\n        processEndKey,\n        processHomeKey,\n        skip,\n    ]);\n    return {\n        activeItemIndex,\n        setActiveItemIndex,\n        reset,\n    };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}